

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/20210927131547.jpg">
  <link rel="icon" href="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/20210927131547.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="该博客使用Hexo+Github创建">
  <meta name="author" content="huanfenz">
  <meta name="keywords" content="">
  <meta name="description" content="SpringBoot   第1章 框架入门 SpringBoot 简介 SpringBoot 的特性 SpringBoot 四大核心   第2章 入门案例 第一个 SpringBoot 项目 1、新建SpringBoot 项目（需要联网状态） 2、项目结构 3、Pom.xml文件的解释 4、创建一个Controller 5、运行 6、入门案例分析   Spring Boot 的核心配置文件 .pr">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot框架">
<meta property="og:url" content="https://huanfenz.top/2021/10/25/SpringBoot/index.html">
<meta property="og:site_name" content="huanfenz的博客">
<meta property="og:description" content="SpringBoot   第1章 框架入门 SpringBoot 简介 SpringBoot 的特性 SpringBoot 四大核心   第2章 入门案例 第一个 SpringBoot 项目 1、新建SpringBoot 项目（需要联网状态） 2、项目结构 3、Pom.xml文件的解释 4、创建一个Controller 5、运行 6、入门案例分析   Spring Boot 的核心配置文件 .pr">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151134866.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151135676.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151139096.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151307442.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151312865.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151314244.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151318315.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151326459.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151345641.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151357386.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151358896.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151358285.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110172245773.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110172246009.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110172251796.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110172255031.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110172302893.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110181539638.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110181546312.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110181549945.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191929979.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191934743.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191934836.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191934836.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191934132.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191934132.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191935562.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191937929.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191939273.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191943992.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191943004.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191943421.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110221726760.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110231406240.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110231408934.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110231502616.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110231502038.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110231506969.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110260048550.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110260050835.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110260054801.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110260055138.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271123050.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271131098.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271148117.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271355138.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271416371.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271801002.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271805329.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271806877.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271807754.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271809165.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271817297.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271825512.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271826698.png">
<meta property="og:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271851037.png">
<meta property="article:published_time" content="2021-10-25T15:00:01.000Z">
<meta property="article:modified_time" content="2021-11-16T06:40:04.797Z">
<meta property="article:author" content="huanfenz">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="SpringBoot">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151134866.png">
  
  <title>SpringBoot框架 - huanfenz的博客</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/obsidian.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"huanfenz.top","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4","collapseDepth":2},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>huanfenz&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/20210927141514.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="SpringBoot框架">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-10-25 23:00" pubdate>
        2021年10月25日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      88k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      275 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">SpringBoot框架</h1>
            
            <div class="markdown-body">
              <h1><span id="springboot">SpringBoot</span></h1><!-- toc -->

<ul>
<li><a href="#%E7%AC%AC1%E7%AB%A0-%E6%A1%86%E6%9E%B6%E5%85%A5%E9%97%A8">第1章 框架入门</a><ul>
<li><a href="#springboot-%E7%AE%80%E4%BB%8B">SpringBoot 简介</a></li>
<li><a href="#springboot-%E7%9A%84%E7%89%B9%E6%80%A7">SpringBoot 的特性</a></li>
<li><a href="#springboot-%E5%9B%9B%E5%A4%A7%E6%A0%B8%E5%BF%83">SpringBoot 四大核心</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC2%E7%AB%A0-%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B">第2章 入门案例</a><ul>
<li><a href="#%E7%AC%AC%E4%B8%80%E4%B8%AA-springboot-%E9%A1%B9%E7%9B%AE">第一个 SpringBoot 项目</a><ul>
<li><a href="#1-%E6%96%B0%E5%BB%BAspringboot-%E9%A1%B9%E7%9B%AE%E9%9C%80%E8%A6%81%E8%81%94%E7%BD%91%E7%8A%B6%E6%80%81">1、新建SpringBoot 项目（<strong>需要联网状态</strong>）</a></li>
<li><a href="#2-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">2、项目结构</a></li>
<li><a href="#3-pomxml%E6%96%87%E4%BB%B6%E7%9A%84%E8%A7%A3%E9%87%8A">3、Pom.xml文件的解释</a></li>
<li><a href="#4-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAcontroller">4、创建一个Controller</a></li>
<li><a href="#5-%E8%BF%90%E8%A1%8C">5、运行</a></li>
<li><a href="#6-%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90">6、入门案例分析</a></li>
</ul>
</li>
<li><a href="#spring-boot-%E7%9A%84%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">Spring Boot 的核心配置文件</a><ul>
<li><a href="#properties-%E6%96%87%E4%BB%B6">.properties 文件</a></li>
<li><a href="#yml-%E6%96%87%E4%BB%B6">.yml 文件</a></li>
</ul>
</li>
<li><a href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91">多环境开发</a><ul>
<li><a href="#%E4%BD%BF%E7%94%A8properties%E6%96%87%E4%BB%B6">使用.properties文件</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8yml%E6%96%87%E4%BB%B6">使用.yml文件</a></li>
</ul>
</li>
<li><a href="#spring-boot-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE">Spring Boot 自定义配置</a><ul>
<li><a href="#value-%E6%B3%A8%E8%A7%A3">@Value 注解</a></li>
<li><a href="#configurationproperties">@ConfigurationProperties</a></li>
<li><a href="#%E8%AD%A6%E5%91%8A%E8%A7%A3%E5%86%B3">警告解决</a></li>
<li><a href="#%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81">中文乱码</a></li>
<li><a href="#%E5%8F%8B%E6%83%85%E6%8F%90%E7%A4%BA">友情提示</a></li>
</ul>
</li>
<li><a href="#spring-boot-%E5%89%8D%E7%AB%AF%E4%BD%BF%E7%94%A8-jsp">Spring Boot 前端使用 JSP</a><ul>
<li><a href="#1-maven%E9%85%8D%E7%BD%AE%E4%BE%9D%E8%B5%96%E9%A1%B9">1、maven配置依赖项</a></li>
<li><a href="#2-maven%E9%85%8D%E7%BD%AE%E7%BC%96%E8%AF%91%E7%9B%AE%E5%BD%95">2、maven配置编译目录</a></li>
<li><a href="#3-%E9%85%8D%E7%BD%AEspringmvc%E9%85%8D%E7%BD%AE">3、配置springmvc配置</a></li>
<li><a href="#4-%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99">4、代码编写</a></li>
<li><a href="#5-%E6%96%B0%E5%BB%BA%E7%95%8C%E9%9D%A2">5、新建界面</a></li>
<li><a href="#6-jsp%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE">6、jsp获取数据</a></li>
<li><a href="#7-%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8C">7、测试运行</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%AC%AC3%E7%AB%A0-springboot%E6%A1%86%E6%9E%B6web%E5%BC%80%E5%8F%91">第3章 SpringBoot框架Web开发</a><ul>
<li><a href="#srpingboot-%E9%9B%86%E6%88%90-mybatis">SrpingBoot 集成 MyBatis</a><ul>
<li><a href="#1-%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E5%BA%93">1、准备数据库</a></li>
<li><a href="#2-%E5%88%9B%E5%BB%BAspringboot%E9%A1%B9%E7%9B%AE%E5%B9%B6%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96">2、创建springboot项目并添加依赖</a></li>
<li><a href="#3-%E6%B7%BB%E5%8A%A0mysql%E5%8F%8D%E5%90%91%E5%B7%A5%E7%A8%8B%E6%8F%92%E4%BB%B6">3、添加mysql反向工程插件</a></li>
<li><a href="#4-%E6%8B%B7%E8%B4%9D%E5%8F%8D%E5%90%91%E5%B7%A5%E7%A8%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%88%B0%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B">4、拷贝反向工程配置文件到项目的根目录下</a></li>
<li><a href="#5-%E7%82%B9%E5%87%BBmaven%E6%8F%92%E4%BB%B6%E4%B8%AD%E7%9A%84mybatis-generator%E6%8F%92%E4%BB%B6%E7%9A%84generate%E5%91%BD%E4%BB%A4">5、点击maven插件中的mybatis-generator插件的generate命令</a></li>
<li><a href="#6-springboot%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90">6、springboot核心配置文件中配置数据源</a></li>
<li><a href="#7-%E5%86%99%E4%BB%A3%E7%A0%81">7、写代码</a></li>
<li><a href="#8-mapper%E6%B3%A8%E8%A7%A3">8、@Mapper注解</a></li>
<li><a href="#9-%E6%B3%A8%E6%84%8F">9、注意</a></li>
<li><a href="#10-%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8C">10、测试运行</a></li>
</ul>
</li>
<li><a href="#dao%E7%9A%84%E5%85%B6%E4%BB%96%E5%BC%80%E5%8F%91%E6%96%B9%E5%BC%8F">Dao的其他开发方式</a><ul>
<li><a href="#mapperscan%E6%B3%A8%E8%A7%A3">@MapperScan注解</a></li>
</ul>
</li>
<li><a href="#%E5%B0%86%E6%8E%A5%E5%8F%A3%E5%92%8C%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E5%88%86%E5%BC%80">将接口和映射文件分开</a></li>
<li><a href="#%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81">事务支持</a></li>
<li><a href="#springboot%E4%B8%8B%E7%9A%84springmvc">SpringBoot下的SpringMVC</a><ul>
<li><a href="#controller">@Controller</a></li>
<li><a href="#restcontroller">@RestController</a></li>
<li><a href="#requestmapping%E5%B8%B8%E7%94%A8">@RequestMapping（常用）</a></li>
<li><a href="#getmapping">@GetMapping</a></li>
<li><a href="#postmapping">@PostMapping</a></li>
<li><a href="#putmapping">@PutMapping</a></li>
<li><a href="#deletemapping">@DeleteMapping</a></li>
<li><a href="#%E6%BC%94%E7%A4%BA%E5%90%84%E7%A7%8D%E6%B3%A8%E8%A7%A3">演示各种注解</a></li>
<li><a href="#http-%E6%8E%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%E5%B7%A5%E5%85%B7-postman-%E4%BB%8B%E7%BB%8D">Http 接口请求工具 Postman 介绍</a></li>
</ul>
</li>
<li><a href="#spring-boot-%E5%AE%9E%E7%8E%B0-restful">Spring Boot 实现 RESTful</a><ul>
<li><a href="#%E8%AE%A4%E8%AF%86-restful">认识 RESTFul</a></li>
<li><a href="#pathvariable">@PathVariable</a></li>
<li><a href="#postmapping-1">@PostMapping</a></li>
<li><a href="#deletemapping-1">@DeleteMapping</a></li>
<li><a href="#putmapping-1">@PutMapping</a></li>
<li><a href="#getmapping-1">@GetMapping</a></li>
<li><a href="#%E6%A1%88%E4%BE%8B%E4%BD%BF%E7%94%A8-restful-%E9%A3%8E%E6%A0%BC%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0%E5%AF%B9%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%93%8D%E4%BD%9C">案例：使用 RESTful 风格模拟实现对学生的增删改查操作</a><ul>
<li><a href="#%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96">相关依赖</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">核心配置文件</a></li>
<li><a href="#%E9%80%9A%E8%BF%87%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E7%94%9F%E6%88%90-dao">通过逆向工程生成 DAO</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA-restfulcontroller%E5%B9%B6%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81">创建 RESTfulController，并编写代码</a></li>
</ul>
</li>
<li><a href="#%E6%80%BB%E7%BB%93">总结</a></li>
<li><a href="#%E8%AF%B7%E6%B1%82%E5%86%B2%E7%AA%81%E7%9A%84%E9%97%AE%E9%A2%98">请求冲突的问题</a></li>
<li><a href="#restful-%E5%8E%9F%E5%88%99">RESTful 原则</a></li>
</ul>
</li>
<li><a href="#spring-boot-%E9%9B%86%E6%88%90-redis">Spring Boot 集成 Redis</a><ul>
<li><a href="#1-%E7%94%9F%E6%88%90bean%E5%92%8C%E6%8C%81%E4%B9%85%E5%B1%82">1、生成bean和持久层</a></li>
<li><a href="#2-%E6%B7%BB%E5%8A%A0-redis-%E4%BE%9D%E8%B5%96">2、添加 redis 依赖</a></li>
<li><a href="#3-spring-boot-%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">3、Spring Boot 核心配置文件</a></li>
<li><a href="#4-%E5%90%AF%E5%8A%A8-redis-%E6%9C%8D%E5%8A%A1">4、启动 redis 服务</a></li>
<li><a href="#5-rediscontroller-%E7%B1%BB">5、RedisController 类</a></li>
<li><a href="#6-studentservice-%E6%8E%A5%E5%8F%A3%E5%92%8Cstudentserviceimpl%E5%AE%9E%E7%8E%B0%E7%B1%BB">6、StudentService 接口和StudentServiceImpl实现类</a></li>
<li><a href="#7-studentmapper-%E6%8E%A5%E5%8F%A3%E5%92%8Cstudentmapper-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6">7、StudentMapper 接口和StudentMapper 映射文件</a></li>
<li><a href="#8-%E6%B7%BB%E5%8A%A0mapperscan%E6%B3%A8%E8%A7%A3%E5%B9%B6%E5%90%AF%E5%8A%A8">8、添加MapperScan注解并启动</a></li>
<li><a href="#9-%E8%AE%A9-student-%E7%B1%BB%E5%AE%9E%E7%8E%B0%E5%BA%8F%E5%88%97%E5%8C%96%E6%8E%A5%E5%8F%A3%E5%8F%AF%E9%80%89">9、让 Student 类实现序列化接口（可选）</a></li>
<li><a href="#10-%E5%90%AF%E5%8A%A8-springboot-%E5%BA%94%E7%94%A8%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95">10、启动 SpringBoot 应用，访问测试</a></li>
</ul>
</li>
<li><a href="#spring-boot-%E9%9B%86%E6%88%90-dubbo">Spring Boot 集成 Dubbo</a><ul>
<li><a href="#1-%E6%96%B0%E5%BB%BA%E6%8E%A5%E5%8F%A3%E5%B7%A5%E7%A8%8B">1、新建接口工程</a></li>
<li><a href="#2-%E6%96%B0%E5%BB%BA%E5%AE%9E%E4%BD%93bean">2、新建实体Bean</a></li>
<li><a href="#3-%E6%96%B0%E5%BB%BAservice%E6%8E%A5%E5%8F%A3">3、新建Service接口</a></li>
<li><a href="#4-%E6%96%B0%E5%BB%BA%E6%8F%90%E4%BE%9B%E8%80%85%E5%B7%A5%E7%A8%8B">4、新建提供者工程</a></li>
<li><a href="#5-%E6%8F%90%E4%BE%9B%E8%80%85%E5%B7%A5%E7%A8%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">5、提供者工程配置文件</a></li>
<li><a href="#6-application%E4%B8%AD%E5%BC%80%E5%90%AFdubbo%E9%85%8D%E7%BD%AE">6、Application中开启dubbo配置</a></li>
<li><a href="#7-%E6%96%B0%E5%BB%BAservice%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E7%B1%BB">7、新建Service接口实现类</a></li>
<li><a href="#8-%E6%96%B0%E5%BB%BA%E6%B6%88%E8%B4%B9%E8%80%85%E5%B7%A5%E7%A8%8B">8、新建消费者工程</a></li>
<li><a href="#9-%E6%B6%88%E8%B4%B9%E8%80%85%E5%B7%A5%E7%A8%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">9、消费者工程配置文件</a></li>
<li><a href="#10-application%E4%B8%AD%E5%BC%80%E5%90%AFdubbo%E9%85%8D%E7%BD%AE">10、Application中开启dubbo配置</a></li>
<li><a href="#11-%E6%96%B0%E5%BB%BAcontroller%E6%96%87%E4%BB%B6">11、新建Controller文件</a></li>
<li><a href="#12-%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95">12、运行测试</a></li>
</ul>
</li>
<li><a href="#springboot-ssm-redis-dubbo%E9%9B%86%E6%88%90">SpringBoot SSM、redis、dubbo集成</a><ul>
<li><a href="#1-%E6%96%B0%E5%BB%BA3%E4%B8%AA%E5%B7%A5%E7%A8%8B">1、新建3个工程</a></li>
<li><a href="#2-%E5%9C%A8%E6%8F%90%E4%BE%9B%E8%80%85%E5%B7%A5%E7%A8%8B%E4%B8%AD%E9%85%8D%E7%BD%AEmysql%E5%8F%8D%E5%90%91%E5%B7%A5%E7%A8%8B">2、在提供者工程中，配置mysql反向工程</a></li>
<li><a href="#3-%E6%8F%90%E4%BE%9B%E8%80%85%E5%B7%A5%E7%A8%8B%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">3、提供者工程的配置文件</a></li>
<li><a href="#4-serviceimpl">4、ServiceImpl</a></li>
<li><a href="#5-%E6%8F%90%E4%BE%9B%E8%80%85%E5%B7%A5%E7%A8%8Bapplication%E7%9A%842%E4%B8%AA%E6%B3%A8%E8%A7%A3">5、提供者工程application的2个注解</a></li>
<li><a href="#6-%E6%B6%88%E8%B4%B9%E8%80%85%E5%B7%A5%E7%A8%8B%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">6、消费者工程的配置文件</a></li>
<li><a href="#7-%E6%B6%88%E8%B4%B9%E8%80%85%E5%B7%A5%E7%A8%8B%E7%9A%84controller">7、消费者工程的controller</a></li>
<li><a href="#8-%E6%B6%88%E8%B4%B9%E8%80%85%E5%B7%A5%E7%A8%8Bapplication%E7%9A%841%E4%B8%AA%E6%B3%A8%E8%A7%A3">8、消费者工程application的1个注解</a></li>
<li><a href="#9-jsp%E6%96%87%E4%BB%B6">9、jsp文件</a></li>
<li><a href="#10-%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95">10、运行测试</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%AC%AC4%E7%AB%A0-springboot-%E9%9D%9Eweb-%E5%92%8C-%E6%94%B9%E5%9B%BE%E6%A0%87%E4%BA%86%E8%A7%A3">第4章 SpringBoot 非web 和 改图标（了解）</a><ul>
<li><a href="#%E6%96%B9%E5%BC%8F%E4%B8%80%E8%8E%B7%E5%8F%96spring%E5%AE%B9%E5%99%A8%E5%AF%B9%E8%B1%A1%E5%86%8D%E8%8E%B7%E5%8F%96%E4%B8%9A%E5%8A%A1bean%E8%B0%83%E7%94%A8">方式一：获取spring容器对象，再获取业务bean调用</a></li>
<li><a href="#%E6%96%B9%E5%BC%8F%E4%BA%8Cspring-boot-%E7%9A%84%E5%85%A5%E5%8F%A3%E7%B1%BB%E5%AE%9E%E7%8E%B0commandlinerunner-%E6%8E%A5%E5%8F%A3">方式二：Spring boot 的入口类实现CommandLineRunner 接口</a></li>
<li><a href="#%E5%85%B3%E9%97%AD-springboot-logo-%E5%9B%BE%E6%A0%87%E5%8F%8A%E5%90%AF%E5%8A%A8%E6%97%A5%E5%BF%97">关闭 SpringBoot Logo 图标及启动日志</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9%E5%90%AF%E5%8A%A8%E7%9A%84-logo-%E5%9B%BE%E6%A0%87">修改启动的 logo 图标</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC5%E7%AB%A0-springboot%E4%BD%BF%E7%94%A8%E6%8B%A6%E6%88%AA%E5%99%A8">第5章 SpringBoot使用拦截器</a><ul>
<li><a href="#%E5%9B%9E%E9%A1%BEspringmvc%E4%BD%BF%E7%94%A8%E6%8B%A6%E6%88%AA%E5%99%A8%E6%AD%A5%E9%AA%A4">回顾springmvc使用拦截器步骤</a></li>
<li><a href="#springboot-%E4%BD%BF%E7%94%A8%E6%8B%A6%E6%88%AA%E5%99%A8">SpringBoot 使用拦截器</a><ul>
<li><a href="#1-%E5%88%9B%E5%BB%BAspringboot%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%9D%97">1、创建Springboot工程（模块）</a></li>
<li><a href="#2-%E6%96%B0%E5%BB%BAuserinterceptor%E7%94%A8%E6%88%B7%E6%8B%A6%E6%88%AA%E5%99%A8">2、新建UserInterceptor用户拦截器</a></li>
<li><a href="#3-%E6%96%B0%E5%BB%BAusercontroller">3、新建UserController</a></li>
<li><a href="#4-%E5%86%99%E4%B8%80%E4%B8%AA%E9%85%8D%E7%BD%AE%E7%B1%BBconfiguration">4、写一个配置类，@Configuration</a></li>
<li><a href="#5-%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95">5、运行测试</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%AC%AC6%E7%AB%A0-springboot%E4%B8%AD%E4%BD%BF%E7%94%A8servlet%E4%BA%86%E8%A7%A3">第6章 SpringBoot中使用Servlet（了解）</a><ul>
<li><a href="#%E6%96%B9%E5%BC%8F%E4%B8%80-%E9%80%9A%E8%BF%87%E6%B3%A8%E8%A7%A3%E6%89%AB%E6%8F%8F%E6%96%B9%E5%BC%8F">方式一 通过注解扫描方式</a><ul>
<li><a href="#1-%E6%96%B0%E5%BB%BAmyservlet%E6%B3%A8%E8%A7%A3webservlet">1、新建MyServlet，注解@WebServlet</a></li>
<li><a href="#2-%E5%9C%A8application%E4%B8%8A%E6%B7%BB%E5%8A%A0%E6%B3%A8%E8%A7%A3servletcomponentscan">2、在Application上添加注解@ServletComponentScan</a></li>
<li><a href="#3-%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95">3、运行测试</a></li>
</ul>
</li>
<li><a href="#%E6%96%B9%E5%BC%8F%E4%BA%8C-%E9%80%9A%E8%BF%87springboot%E7%9A%84%E9%85%8D%E7%BD%AE%E7%B1%BB%E5%AE%9E%E7%8E%B0">方式二 通过SpringBoot的配置类实现</a><ul>
<li><a href="#1-%E5%88%9B%E5%BB%BAmyservlet">1、创建MyServlet</a></li>
<li><a href="#2-springboot%E7%9A%84%E9%85%8D%E7%BD%AE%E7%B1%BB%E4%B8%AD%E6%B3%A8%E5%86%8Cservlet">2、SpringBoot的配置类中注册Servlet</a></li>
<li><a href="#3-%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95-1">3、运行测试</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%AC%AC7%E7%AB%A0-springboot%E4%B8%AD%E4%BD%BF%E7%94%A8filter%E4%BA%86%E8%A7%A3">第7章 SpringBoot中使用Filter（了解）</a><ul>
<li><a href="#%E6%96%B9%E5%BC%8F%E4%B8%80%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F">方式一：注解方式</a><ul>
<li><a href="#1-%E9%80%9A%E8%BF%87%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAfilter">1、通过注解方式创建一个Filter</a></li>
<li><a href="#2-application%E4%B8%8A%E5%8A%A0%E4%B8%8A%E6%B3%A8%E8%A7%A3servletcomponentscan">2、application上加上注解@ServletComponentScan</a></li>
<li><a href="#3-%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95-2">3、运行测试</a></li>
</ul>
</li>
<li><a href="#%E6%96%B9%E5%BC%8F%E4%BA%8Cspringboot%E9%85%8D%E7%BD%AE%E7%B1%BB%E6%96%B9%E5%BC%8F">方式二：SpringBoot配置类方式</a><ul>
<li><a href="#1-%E6%96%B0%E5%BB%BAmyfilter">1、新建MyFilter</a></li>
<li><a href="#2-%E7%BC%96%E5%86%99%E9%85%8D%E7%BD%AE%E7%B1%BB%E6%B3%A8%E5%86%8Cfilter">2、 编写配置类，注册Filter</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%AC%AC8%E7%AB%A0-springboot%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81">第8章 SpringBoot项目配置字符编码</a><ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAservlet">创建一个Servlet</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E7%B1%BB-systemconfig">创建配置类 SystemConfig</a></li>
<li><a href="#%E5%85%B3%E9%97%AD-springboot-%E7%9A%84-http-%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E6%94%AF%E6%8C%81">关闭 SpringBoot 的 http 字符编码支持</a></li>
</ul>
<ul>
<li><a href="#%E6%96%B9%E6%B3%95%E4%BA%8C%E5%9C%A8-applicationproperties-%E4%B8%AD%E9%85%8D%E7%BD%AE%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E6%8E%A8%E8%8D%90">方法二：在 application.properties 中配置字符编码（推荐）</a><ul>
<li><a href="#%E5%88%9B%E5%BB%BA-servlet">创建 Servlet</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E7%B1%BB-servletconfig">创建配置类 ServletConfig</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%AC%AC9%E7%AB%A0-springboot%E6%89%93%E5%8C%85%E4%B8%8E%E9%83%A8%E7%BD%B2">第9章 SpringBoot打包与部署</a><ul>
<li><a href="#spring-boot%E7%A8%8B%E5%BA%8F%E6%89%93-war-%E5%8C%85">Spring Boot程序打 war 包</a></li>
<li><a href="#spring-boot-%E7%A8%8B%E5%BA%8F%E6%89%93-jar-%E5%8C%85%E4%B8%8E%E8%BF%90%E8%A1%8C">Spring Boot 程序打 Jar 包与运行</a></li>
<li><a href="#%E6%89%93%E5%8C%85%E4%B8%8E%E9%83%A8%E7%BD%B2%E6%80%BB%E7%BB%93">打包与部署总结</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC10%E7%AB%A0-springboot-%E9%9B%86%E6%88%90-logback-%E6%97%A5%E5%BF%97">第10章 SpringBoot 集成 logback 日志</a></li>
<li><a href="#%E7%AC%AC11%E7%AB%A0-springboot-%E9%9B%86%E6%88%90-thymeleaf-%E6%A8%A1%E6%9D%BF">第11章 SpringBoot 集成 Thymeleaf 模板</a><ul>
<li><a href="#%E8%AE%A4%E8%AF%86thymeleaf">认识ThymeLeaf</a></li>
<li><a href="#spring-boot-%E9%9B%86%E6%88%90-thymeleaf">Spring Boot 集成 Thymeleaf</a><ul>
<li><a href="#1-%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B">1、创建工程</a></li>
<li><a href="#2-springboot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">2、springboot配置文件</a></li>
<li><a href="#3-%E5%86%99controller">3、写Controller</a></li>
<li><a href="#4-%E5%86%99thymeleaf%E7%9A%84html">4、写thymeleaf的html</a></li>
<li><a href="#5-%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95-1">5、运行测试</a></li>
</ul>
</li>
<li><a href="#thymeleaf%E8%A1%A8%E8%BE%BE%E5%BC%8F">Thymeleaf表达式</a><ul>
<li><a href="#%E6%A0%87%E5%87%86%E5%8F%98%E9%87%8F%E8%A1%A8%E8%BE%BE%E5%BC%8F">标准变量表达式</a></li>
<li><a href="#%E9%80%89%E6%8B%A9%E5%8F%98%E9%87%8F%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BA%86%E8%A7%A3%E4%B8%8D%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8">选择变量表达式（了解，不推荐使用）</a></li>
<li><a href="#url%E8%A1%A8%E8%BE%BE%E5%BC%8F">URL表达式</a></li>
</ul>
</li>
<li><a href="#thymeleaf-%E7%9A%84%E5%B8%B8%E8%A7%81%E5%B1%9E%E6%80%A7">Thymeleaf 的常见属性</a><ul>
<li><a href="#thaction">th:action</a></li>
<li><a href="#thmethod">th:method</a></li>
<li><a href="#thhref">th:href</a></li>
<li><a href="#thsrc">th:src</a></li>
<li><a href="#thid">th:id</a></li>
<li><a href="#thname">th:name</a></li>
<li><a href="#thvalue">th:value</a></li>
<li><a href="#thattr">th:attr</a></li>
<li><a href="#thtext">th:text</a></li>
<li><a href="#thobject">th:object</a></li>
<li><a href="#thonclick">th:onclick</a></li>
<li><a href="#thstyle">th:style</a></li>
<li><a href="#font-colorredtheachfont"><font color="red">*th:each</font></a><ul>
<li><a href="#%E9%81%8D%E5%8E%86-list-%E9%9B%86%E5%90%88">遍历 List 集合</a></li>
<li><a href="#%E9%81%8D%E5%8E%86-map-%E9%9B%86%E5%90%88">遍历 Map 集合</a></li>
<li><a href="#%E9%81%8D%E5%8E%86-array-%E6%95%B0%E7%BB%84">遍历 Array 数组</a></li>
<li><a href="#%E6%AF%94%E8%BE%83%E5%A4%8D%E6%9D%82%E7%9A%84%E5%BE%AA%E7%8E%AF%E6%A1%88%E4%BE%8B">比较复杂的循环案例</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD">条件判断</a><ul>
<li><a href="#thif-%E5%92%8C-thunless">th:if 和 th:unless</a></li>
<li><a href="#thswitchthcase">th:switch/th:case</a></li>
<li><a href="#thinline">th:inline</a></li>
</ul>
</li>
<li><a href="#thymeleaf-%E5%AD%97%E9%9D%A2%E9%87%8F">Thymeleaf 字面量</a></li>
<li><a href="#thymeleaf-%E8%BF%90%E7%AE%97%E7%AC%A6">Thymeleaf 运算符</a></li>
<li><a href="#thymaleaf-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%9F%BA%E6%9C%AC%E5%AF%B9%E8%B1%A1">Thymaleaf 表达式基本对象</a><ul>
<li><a href="#request">#request</a></li>
<li><a href="#session">#session</a></li>
</ul>
</li>
<li><a href="#thymeleaf-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8A%9F%E8%83%BD%E5%AF%B9%E8%B1%A1%E4%BA%86%E8%A7%A3">Thymeleaf 表达式功能对象（了解）</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC12%E7%AB%A0-%E6%80%BB%E7%BB%93%E5%8F%8A%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B">第12章 总结及综合案例</a><ul>
<li><a href="#%E6%80%BB%E7%BB%93-1">总结</a></li>
<li><a href="#%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B">综合案例</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h2><span id="第1章-框架入门">第1章 框架入门</span></h2><h3><span id="springboot-简介">SpringBoot 简介</span></h3><p>Spring Boot 用来<font color="red">简化 Spring 应用程序的创建和开发过程</font>，也可以说 Spring Boot 能简化我们之前采用SSM框架进行开发的过程。 </p>
<p>在以往我们采用 SSM 框架进行开发的时候，搭建和整合三大框架，我们需要做很多工作，比如配置 web.xml，配置 Spring，配置MyBatis，并将它们整合在一起等。</p>
<p>而 Spring Boot 框架对此开发过程进行了革命性的颠覆，完全抛弃了繁琐的 xml 配置过程，采用大量的默认配置简化我们的开发过程。 </p>
<p>所以采用 Spring Boot 可以<font color="red">非常容易和快速地创建基于 Spring 框架的应用程序</font>，它让编码变简单了，配置变简单了，部署变简单了，监控变简单了。正因为 Spring Boot 它化繁为简，让开发变得极其简单和快速，所以在业界备受关注。 </p>
<h3><span id="springboot-的特性">SpringBoot 的特性</span></h3><p>➢ 能够快速创建基于 Spring 的应用程序<br>➢ 能够直接使用 java main 方法启动<font color="red">内嵌的Tomcat 服务器</font>运行 Spring Boot 程序，不需<br>要部署 war 包文件<br>➢ 提供约定的starter POM 来<font color="red">简化Maven 配置</font>，让 Maven 的配置变得简单<br>➢ <font color="red">自动化配置</font>，根据项目的Maven 依赖配置，<font color="red">Spring boot 自动配置 Spring、Spring mvc等 </font><br>➢ 提供了程序的健康检查等功能<br>➢ 基本可以完全不使用XML 配置文件，<font color="red">采用注解配置 </font></p>
<h3><span id="springboot-四大核心">SpringBoot 四大核心</span></h3><ol>
<li>  自动配置</li>
<li>  起步依赖</li>
<li>  Actuator（国内不用）</li>
<li>  命令行界面（国内不用）</li>
</ol>
<h2><span id="第2章-入门案例">第2章 入门案例</span></h2><h3><span id="第一个-springboot-项目">第一个 SpringBoot 项目</span></h3><h4><span id="1-新建springboot-项目需要联网状态">1、新建SpringBoot 项目（<strong>需要联网状态</strong>）</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151134866.png" srcset="/img/loading.gif" lazyload alt="image-20211015113410771"></p>
<p>Next</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151135676.png" srcset="/img/loading.gif" lazyload alt="image-20211015113547638"></p>
<p>Finish</p>
<p>第一次新建需要下载相关依赖，请耐心等待。</p>
<h4><span id="2-项目结构">2、项目结构</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151139096.png" srcset="/img/loading.gif" lazyload alt="image-20211015113949066"></p>
<p>.mvn|mvnw|mvnw.cmd：使用脚本操作执行 maven 相关命令，国内使用较少，可删除</p>
<p>.gitignore：使用版本控制工具git 的时候，设置一些忽略提交的内容</p>
<p>static：存放静态资源，如图片，CSS，JavaScript等</p>
<p>templates：存放Web页面的模板文件</p>
<p>application.properties/application.yml 用于存放程序的各种依赖模块的配置信息，比如 服务端口，数据库连接配置等 </p>
<p>Application.java：SpringBoot 程序执行的入口，执行该程序中的main 方法，SpringBoot就启动了</p>
<h4><span id="3-pomxml文件的解释">3、Pom.xml文件的解释</span></h4><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--继承SpringBoot框架的一个父项目，所有自己开发的SpringBoot都必须继承--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--当前项目的坐标--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.wangpeng.springboot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot-first<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--maven项目名称，可以删除--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>001-springboot-first<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--maven项目描述，可以删除--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Demo project for Spring Boot<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--maven属性配置，可以在其它地方通过$&#123;&#125;方式进行引用--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--SpringBoot框架web项目起步依赖，通过该依赖自动关联其它依赖，不需要我们一个一个取添加了--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--SpringBoot框架测试起步依赖，例如junit测试，如果不需要的话可以删除--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--SpringBoot项目打包编译的插件--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="4-创建一个controller">4、创建一个Controller</span></h4><p>在com.wangpeng.springboot.web下新建IndexController.java</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot.web;<br><br><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;<br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IndexController</span> </span>&#123;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/springboot/say&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-meta">@ResponseBody</span> <span class="hljs-function">String <span class="hljs-title">say</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello,SpringBoot!&quot;</span>;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>

<p><font color="red"><strong>注意：新创建的类一定要位于 Application 同级目录或者下级目录，否则 SpringBoot 加载不到。</strong> </font></p>
<p>可以看出来，使用方法和SpringMVC一样，加个@Controller注解，@RequestMapping注解设置一下请求路径，然后加个@ResponseBody注解返回一个字符串数据。</p>
<h4><span id="5-运行">5、运行</span></h4><p>右键运行Application类中的main方法即可。</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-comment">//SpringBoot项目启动入口类</span><br><span class="hljs-meta">@SpringBootApplication</span>  <span class="hljs-comment">//开启springboot配置</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123;<br><br>    <span class="hljs-comment">//springboot项目代码必须放到Application类所在的同级目录或下级目录</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(Application.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>通过在控制台的输出，可以看到启动 SpringBoot 框架，会启动一个内嵌的 tomcat，端口号为 8080，上下文根为空</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151307442.png" srcset="/img/loading.gif" lazyload alt="image-20211015130702330"></p>
<p>在浏览器中输入 <a target="_blank" rel="noopener" href="http://localhost:8080/springBoot/say">http://localhost:8080/springBoot/say</a> 访问</p>
<h4><span id="6-入门案例分析">6、入门案例分析</span></h4><p>➢ Spring Boot 的父级依赖 spring-boot-starter-parent 配置之后，当前的项目就是 Spring Boot 项目 </p>
<p>➢ spring-boot-starter-parent 是一个 Springboot 的父级依赖，开发 SpringBoot 程序都需要继承该父级项目，它用来提供相关的Maven 默认依赖，使用它之后，常用的jar包依赖可以省去 version 配置 </p>
<p>➢ Spring Boot 提供了哪些默认 jar 包的依赖，可查看该父级依赖的 pom 文件</p>
<p>➢ 如果不想使用某个默认的依赖版本，可以通过 pom.xml 文件的属性配置覆盖各个<br>依赖项，比如覆盖 Spring 版本</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span> <br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">spring-framework.version</span>&gt;</span>5.0.0.RELEASE&lt;/spring-framework.version &gt; <br><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p>➢ @SpringBootApplication注解是Spring Boot项目的核心注解，主要作用是开启Spring 自动配置，如果在 Application 类上去掉该注解，那么不会启动 SpringBoot<br>程序 </p>
<p>➢ main 方法是一个标准的 Java 程序的 main 方法，主要作用是作为项目启动运行的入口 </p>
<p>➢ @Controller 及 @ResponseBody 依然是我们之前的 Spring MVC，因为 Spring Boot的里面依然是使用我们的 Spring MVC + Spring + MyBatis 等框架 </p>
<h3><span id="spring-boot-的核心配置文件">Spring Boot 的核心配置文件</span></h3><p>Spring Boot 的核心配置文件用于配置 Spring Boot 程序，名字必须以 application 开始</p>
<h4><span id="properties-文件">.properties 文件</span></h4><p>通过修改 application.properties 配置文件，在修改默认 tomcat <font color="red">端口号</font>及项目<font color="red">上下文根</font>。</p>
<p>键值对的 properties 属性文件配置方式</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#设置内嵌Tomcat端口号 </span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">9090 </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#配置项目上下文根 </span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/003-springboot-port-context-path </span><br></code></pre></div></td></tr></table></figure>



<h4><span id="yml-文件">.yml 文件</span></h4><p>yml 是一种 yaml 格式的配置文件，主要采用一定的空格、换行等格式排版进行配置。</p>
<p>yaml 是一种直观的能够被计算机识别的的数据序列化格式，容易被人类阅读，yaml 类似于 xml，但是语法比 xml 简洁很多，<font color="red">值与前面的冒号配置项必须要有一个空格</font>， <strong>yml 后缀也可以使用 yaml 后缀</strong>。</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151312865.png" srcset="/img/loading.gif" lazyload alt="image-20211015131244830"></p>
<p>注意：当两种格式配置文件同时存在，使用的是.properties 配置文件。</p>
<h3><span id="多环境开发">多环境开发</span></h3><p>在实际开发的过程中，我们的项目会经历很多的阶段（开发-&gt;测试-&gt;上线），每个阶段<br>的配置也会不同，例如：端口、上下文根、数据库等，那么这个时候为了方便在不同的环境之间切换，SpringBoot 提供了多环境配置，具体步骤如下</p>
<h4><span id="使用properties文件">使用.properties文件</span></h4><p>1、为每个环境创建一个配置文件，命名必须以application-环境标识.properties|yml</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151314244.png" srcset="/img/loading.gif" lazyload alt="image-20211015131433218"></p>
<p>2、不同的配置文件</p>
<p>application-dev.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#开发环境</span><br><span class="hljs-comment">#设置内嵌Tomcat默认端口号 </span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">8080 </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#设置项目的上下文根 </span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/005-springboot-multi-environment-dev </span><br></code></pre></div></td></tr></table></figure>

<p>application-product.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#生产环境 </span><br><span class="hljs-comment">#配置内嵌Tomcat默认端口号 </span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">80 </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#配置项目上下文根 </span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/005-springboot-multi-environment-product </span><br></code></pre></div></td></tr></table></figure>

<p>application-test.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#测试环境 </span><br><span class="hljs-comment">#配置内嵌Tomcat端口号 </span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">8081 </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#配置项目的上下文根 </span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/005-springboot-multi-environment-test </span><br></code></pre></div></td></tr></table></figure>

<p>在总配置文件 application.properties 进行环境的激活</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#SpringBoot的总配置文件 </span><br><span class="hljs-comment"></span><br><span class="hljs-comment">#激活开发环境 </span><br><span class="hljs-comment">#spring.profiles.active=dev </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#激活测试环境 </span><br><span class="hljs-comment">#spring.profiles.active=test </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#激活生产环境 </span><br><span class="hljs-meta">spring.profiles.active</span>=<span class="hljs-string">product</span><br></code></pre></div></td></tr></table></figure>

<p><font color="purple">等号右边的值和配置文件的环境标识名一致，可以更改总配置文件的配置，重新运行Application，查看启动的端口及上下文根</font></p>
<h4><span id="使用yml文件">使用.yml文件</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151318315.png" srcset="/img/loading.gif" lazyload alt="image-20211015131830268"></p>
<p>SpringBoot 总配置文件：application.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs yaml"><span class="hljs-comment">#springboot总配置文件 </span><br> <br><span class="hljs-comment">#激活开发环境 </span><br><span class="hljs-comment">#spring: </span><br><span class="hljs-comment">#  profiles: </span><br><span class="hljs-comment">#    active: dev</span><br><span class="hljs-comment">#激活测试环境 </span><br><span class="hljs-comment">#spring: </span><br><span class="hljs-comment">#  profiles: </span><br><span class="hljs-comment">#    active: test </span><br> <br><span class="hljs-comment">#激活生产环境 </span><br><span class="hljs-attr">spring:</span> <br>  <span class="hljs-attr">profiles:</span> <br>    <span class="hljs-attr">active:</span> <span class="hljs-string">product</span><br></code></pre></div></td></tr></table></figure>

<p>开发环境配置文件：application-dev.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs yaml"><span class="hljs-comment">#设置开发环境配置 </span><br>  <br><span class="hljs-attr">server:</span> <br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span> <span class="hljs-comment">#设置Tomcat内嵌端口号 </span><br>  <span class="hljs-attr">servlet:</span> <br>    <span class="hljs-attr">context-path:</span> <span class="hljs-string">/dev</span>  <span class="hljs-comment">#设置上下文根</span><br>    <br></code></pre></div></td></tr></table></figure>

<p>测试环境配置文件：application-test.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs yaml"><span class="hljs-comment">#设置测试环境配置 </span><br> <br><span class="hljs-attr">server:</span> <br>  <span class="hljs-attr">port:</span> <span class="hljs-number">9090</span> <br>  <span class="hljs-attr">servlet:</span> <br>    <span class="hljs-attr">context-path:</span> <span class="hljs-string">/test</span><br></code></pre></div></td></tr></table></figure>

<p>生产环境配置文件：application-product.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs yaml"><span class="hljs-comment">#设置生产环境配置 </span><br> <br><span class="hljs-attr">server:</span> <br>  <span class="hljs-attr">port:</span> <span class="hljs-number">80</span> <br>  <span class="hljs-attr">servlet:</span> <br>    <span class="hljs-attr">context-path:</span> <span class="hljs-string">/product</span><br></code></pre></div></td></tr></table></figure>



<h3><span id="spring-boot-自定义配置">Spring Boot 自定义配置</span></h3><p>在 SpringBoot 的核心配置文件中，除了使用内置的配置项之外，我们还可以在自定义配置，然后采用如下注解去读取配置的属性值</p>
<h4><span id="value-注解">@Value 注解</span></h4><p>在核心配置文件 applicatin.properties 中，添加两个自定义配置项 school.name 和<br>website。在 IDEA 中可以看到这两个属性不能被 SpringBoot 识别，背景是桔色的</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151326459.png" srcset="/img/loading.gif" lazyload alt="image-20211015132638416"></p>
<p>application.yml 格式配置文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs yaml"><span class="hljs-comment">#设置端口号及上下文根 </span><br><span class="hljs-attr">server:</span> <br>  <span class="hljs-attr">port:</span> <span class="hljs-number">9090</span> <br>  <span class="hljs-attr">servlet:</span> <br>    <span class="hljs-attr">context-path:</span> <span class="hljs-string">/</span> <br> <br><span class="hljs-attr">school:</span> <br>  <span class="hljs-attr">name:</span> <span class="hljs-string">ssm</span> <br><span class="hljs-attr">websit:</span> <span class="hljs-string">http://www.baidu.com</span><br></code></pre></div></td></tr></table></figure>



<p>使用@Value注解 赋值给变量，相当于直接 = 号赋默认初值。</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringBootController</span> </span>&#123; <br> <br>    <span class="hljs-meta">@Value(&quot;$&#123;school.name&#125;&quot;)</span> <br>    <span class="hljs-keyword">private</span> String schoolName; <br> <br>    <span class="hljs-meta">@Value(&quot;$&#123;websit&#125;&quot;)</span> <br>    <span class="hljs-keyword">private</span> String websit; <br> <br>    <span class="hljs-meta">@RequestMapping(value = &quot;/springBoot/say&quot;)</span> <br>    <span class="hljs-keyword">public</span> <span class="hljs-meta">@ResponseBody</span> <span class="hljs-function">String <span class="hljs-title">say</span><span class="hljs-params">()</span> </span>&#123; <br>        <span class="hljs-keyword">return</span> schoolName + <span class="hljs-string">&quot;------&quot;</span> + websit; <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="configurationproperties">@ConfigurationProperties</span></h4><p>在 com.abc.springboot.config 包下创建 ConfigInfo 类，并为该类加上 Component 和ConfigurationProperties 注解，并在 ConfigurationProperties 注解中添加属性 prefix，作用可以区分同名配置</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Component</span>	<span class="hljs-comment">//创建对象，交给spring管理</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;school&quot;)</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConfigInfo</span> </span>&#123; <br> <br>    <span class="hljs-keyword">private</span> String name; <br> <br>    <span class="hljs-keyword">private</span> String websit; <br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123; <br>        <span class="hljs-keyword">return</span> name; <br>    &#125; <br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123; <br>        <span class="hljs-keyword">this</span>.name = name; <br>    &#125; <br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getWebsit</span><span class="hljs-params">()</span> </span>&#123; <br>        <span class="hljs-keyword">return</span> websit; <br>    &#125; <br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setWebsit</span><span class="hljs-params">(String websit)</span> </span>&#123; <br>        <span class="hljs-keyword">this</span>.websit = websit; <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>application.properties 配置文件</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#设置内嵌Tomcat端口号 </span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">9090 </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#设置上下文根 </span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/config</span><br> <br><span class="hljs-meta">school.name</span>=<span class="hljs-string">ssm </span><br><span class="hljs-meta">school.websit</span>=<span class="hljs-string">http://www.baidu.com</span><br></code></pre></div></td></tr></table></figure>

<p>application.yml 配置文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span> <br>  <span class="hljs-attr">port:</span> <span class="hljs-number">9090</span> <br>  <span class="hljs-attr">servlet:</span> <br>    <span class="hljs-attr">context-path:</span> <span class="hljs-string">/config</span><br><br><span class="hljs-attr">school:</span> <br>  <span class="hljs-attr">name:</span> <span class="hljs-string">ABC</span> <br>  <span class="hljs-attr">websit:</span> <span class="hljs-string">http://www.baidu.com</span><br></code></pre></div></td></tr></table></figure>

<p>在 SpringBootController 中注入 ConfigInfo 配置类</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span> <br><span class="hljs-keyword">private</span> ConfigInfo configInfo;<br></code></pre></div></td></tr></table></figure>

<p>修改 SpringBootController 类中的测试方法</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/springBoot/config&quot;)</span> <br><span class="hljs-keyword">public</span> <span class="hljs-meta">@ResponseBody</span> <span class="hljs-function">String <span class="hljs-title">say</span><span class="hljs-params">()</span> </span>&#123; <br>    <span class="hljs-keyword">return</span> configInfo.getName() + <span class="hljs-string">&quot;=======&quot;</span> + configInfo.getWebsit(); <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="警告解决">警告解决</span></h4><p>在 ConfigInfo 类中使用了 ConfigurationProperties 注解后，IDEA 会出现一个警告，<br>不影响程序的执行</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151345641.png" srcset="/img/loading.gif" lazyload alt="image-20211015134509604"></p>
<p>点击 open documentnation 跳转到网页，在网页中提示需要加一个依赖，我们将这<br>个依赖拷贝，粘贴到 pom.xml 文件中</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--解决使用@ConfigurationProperties注解出现警告问题--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="中文乱码">中文乱码</span></h4><p>如果在 SpringBoot 核心配置文件中有中文信息，会出现乱码</p>
<ul>
<li>  一般在配置文件中，不建议出现中文（注释除外）</li>
<li>  如果有，可以先转化为 ASCII 码</li>
</ul>
<h4><span id="友情提示">友情提示</span></h4><p>大家如果是从其它地方拷贝的配置文件，一定要将里面的空格删干净</p>
<h3><span id="spring-boot-前端使用-jsp">Spring Boot 前端使用 JSP</span></h3><h4><span id="1-maven配置依赖项">1、maven配置依赖项</span></h4><p>在 pom.xml 文件中配置以下依赖项</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--引入Spring Boot内嵌的Tomcat对JSP的解析包，不加解析不了jsp页面--&gt;</span> <br><span class="hljs-comment">&lt;!--如果只是使用JSP页面，可以只添加该依赖--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br> <br><span class="hljs-comment">&lt;!--如果要使用servlet必须添加该以下两个依赖--&gt;</span> <br><span class="hljs-comment">&lt;!-- servlet依赖的jar包--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span> <br> <br><span class="hljs-comment">&lt;!--如果使用JSTL必须添加该依赖--&gt;</span> <br><span class="hljs-comment">&lt;!--jstl标签依赖的jar包start--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="2-maven配置编译目录">2、maven配置编译目录</span></h4><p>在 pom.xml 的 **<font color="red">build 标签中</font>**要配置以下信息</p>
<p>SpringBoot 要求 jsp 文件必须编译到指定的 META-INF/resources 目录下才能访问，否则访问不到。其实官方已经更建议使用模板技术（后面会讲模板技术）</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">    SpringBoot要求jsp文件必须编译到指定的META-INF/resources目录下才能访问，否则访问</span><br><span class="hljs-comment">不到。 </span><br><span class="hljs-comment">    其它官方已经建议使用模版技术（后面会课程会单独讲解模版技术） </span><br><span class="hljs-comment">--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--源文件位置--&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/webapp<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span> <br>        <span class="hljs-comment">&lt;!--指定编译到META-INF/resources，该目录不能随便写--&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">targetPath</span>&gt;</span>META-INF/resources<span class="hljs-tag">&lt;/<span class="hljs-name">targetPath</span>&gt;</span> <br>        <span class="hljs-comment">&lt;!--指定要把哪些文件编译进去，**表示webapp目录及子目录，*.*表示所有文件--&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.*<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>



<h4><span id="3-配置springmvc配置">3、配置springmvc配置</span></h4><p>在 application.properties 文件配置 Spring MVC 的视图展示为jsp，这里相当于 Spring MVC 的配置</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#SpringBoot核心配置文件 </span><br><span class="hljs-comment">#指定内嵌Tomcat端口号 </span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">8090 </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#配置SpringMVC视图解析器 </span><br><span class="hljs-comment">#其中：/ 表示目录为src/main/webapp </span><br><span class="hljs-meta">spring.mvc.view.prefix</span>=<span class="hljs-string">/ </span><br><span class="hljs-meta">spring.mvc.view.suffix</span>=<span class="hljs-string">.jsp</span><br></code></pre></div></td></tr></table></figure>

<p>application.yml 格式的配置文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs yaml"><span class="hljs-comment">#SpringBoot 核心配置文件 </span><br><span class="hljs-comment">#指定内嵌Tomcat 端口号 </span><br><span class="hljs-attr">server :</span> <br> <span class="hljs-attr">port :</span> <span class="hljs-number">8090</span> <br> <span class="hljs-attr">servlet :</span> <br> <span class="hljs-attr">context - path :</span> <span class="hljs-string">/</span> <br> <br><span class="hljs-comment">#配置SpringMVC视图解析器 </span><br><br><span class="hljs-comment">#其中：/ 表示目录为src/main/webapp </span><br><br><span class="hljs-attr">spring :</span> <br>  <span class="hljs-attr">mvc:</span> <br>  <span class="hljs-attr">view :</span> <br>    <span class="hljs-attr">prefix:</span> <span class="hljs-string">/</span> <br>	<span class="hljs-attr">suffix:</span> <span class="hljs-string">.jsp</span> <br></code></pre></div></td></tr></table></figure>

<p><font color="purple">集成完毕之后，剩下的步骤和我们使用 Spring MVC 一样</font></p>
<h4><span id="4-代码编写">4、代码编写</span></h4><p>在 com.abc.springboot.controller 包下创建 JspController 类，并编写代码</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringBootController</span> </span>&#123; <br> <br>    <span class="hljs-meta">@RequestMapping(value = &quot;/springBoot/jsp&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">jsp</span><span class="hljs-params">(Model model)</span> </span>&#123; <br> <br>        model.addAttribute(<span class="hljs-string">&quot;data&quot;</span>,<span class="hljs-string">&quot;SpringBoot 前端使用JSP页面！&quot;</span>); <br> <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;index&quot;</span>; <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="5-新建界面">5、新建界面</span></h4><ol>
<li><p>  在 src/main 下创建一个 webapp 目录</p>
</li>
<li><p>  在Project Structure 中指定webapp为 Web Resource Directory</p>
</li>
<li><p>  根据提示创建一下Artifacts</p>
</li>
<li><p>  新建jsp页面</p>
</li>
</ol>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151357386.png" srcset="/img/loading.gif" lazyload alt="image-20211015135751329"></p>
<h4><span id="6-jsp获取数据">6、jsp获取数据</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151358896.png" srcset="/img/loading.gif" lazyload alt="image-20211015135817846"></p>
<h4><span id="7-测试运行">7、测试运行</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110151358285.png" srcset="/img/loading.gif" lazyload alt="image-20211015135828256"></p>
<p><font color="red">注意：如果出不来，重启IDEA！！！！</font></p>
<h2><span id="第3章-springboot框架web开发">第3章 SpringBoot框架Web开发</span></h2><h3><span id="srpingboot-集成-mybatis">SrpingBoot 集成 MyBatis</span></h3><h4><span id="1-准备数据库">1、准备数据库</span></h4><p>创建数据库，库名springboot，编码utf-8</p>
<p>创建表，表名t_student</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110172245773.png" srcset="/img/loading.gif" lazyload alt="image-20211017224549685"></p>
<p>插入数据</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110172246009.png" srcset="/img/loading.gif" lazyload alt="image-20211017224622968"></p>
<p><font color="red">或者创建好数据库后，直接导入附件中的springboot.sql</font></p>
<h4><span id="2-创建springboot项目并添加依赖">2、创建springboot项目并添加依赖</span></h4><p>MyBatis和MySQL的依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--MyBatis整合SpringBoot的起步依赖--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--MySQL的驱动依赖--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="3-添加mysql反向工程插件">3、添加mysql反向工程插件</span></h4><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.generator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span> <br>        <span class="hljs-comment">&lt;!--配置文件的位置--&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">configurationFile</span>&gt;</span>GeneratorMapper.xml<span class="hljs-tag">&lt;/<span class="hljs-name">configurationFile</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">verbose</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">verbose</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">overwrite</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">overwrite</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>



<h4><span id="4-拷贝反向工程配置文件到项目的根目录下">4、拷贝反向工程配置文件到项目的根目录下</span></h4><p>GeneratorMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">generatorConfiguration</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">generatorConfiguration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 指定连接数据库的 JDBC 驱动包所在位置，指定到你本机的完整路径 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">classPathEntry</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;D:\mysql-connector-java-5.1.6.jar&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!-- 配置 table 表信息内容体，targetRuntime 指定采用 MyBatis3 的版本 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tables&quot;</span> <span class="hljs-attr">targetRuntime</span>=<span class="hljs-string">&quot;MyBatis3&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 抑制生成注释，由于生成的注释都是英文的，可以不让它生成 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">commentGenerator</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suppressAllComments&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">commentGenerator</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 配置数据库连接信息 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">jdbcConnection</span> <span class="hljs-attr">driverClass</span>=<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span></span><br><span class="hljs-tag">                        <span class="hljs-attr">connectionURL</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/springboot&quot;</span></span><br><span class="hljs-tag">                        <span class="hljs-attr">userId</span>=<span class="hljs-string">&quot;root&quot;</span></span><br><span class="hljs-tag">                        <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;wangpeng123&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">jdbcConnection</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 生成 model 类，targetPackage 指定 model 类的包名</span><br><span class="hljs-comment">        targetProject 指定生成的 model 放在 eclipse 的哪个工程下面--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">javaModelGenerator</span> <span class="hljs-attr">targetPackage</span>=<span class="hljs-string">&quot;com.wangpeng.springboot.model&quot;</span></span><br><span class="hljs-tag">                            <span class="hljs-attr">targetProject</span>=<span class="hljs-string">&quot;src/main/java&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;enableSubPackages&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;trimStrings&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">javaModelGenerator</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 生成 MyBatis 的 Mapper.xml 文件，targetPackage 指定 mapper.xml 文件的</span><br><span class="hljs-comment">        包名， targetProject 指定生成的 mapper.xml 放在 eclipse 的哪个工程下面 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">sqlMapGenerator</span> <span class="hljs-attr">targetPackage</span>=<span class="hljs-string">&quot;com.wangpeng.springboot.mapper&quot;</span></span><br><span class="hljs-tag">                         <span class="hljs-attr">targetProject</span>=<span class="hljs-string">&quot;src/main/java&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;enableSubPackages&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">sqlMapGenerator</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 生成 MyBatis 的 Mapper 接口类文件,targetPackage 指定 Mapper 接口类的包</span><br><span class="hljs-comment">        名， targetProject 指定生成的 Mapper 接口放在 eclipse 的哪个工程下面 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">javaClientGenerator</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;XMLMAPPER&quot;</span></span><br><span class="hljs-tag">                             <span class="hljs-attr">targetPackage</span>=<span class="hljs-string">&quot;com.wangpeng.springboot.mapper&quot;</span> <span class="hljs-attr">targetProject</span>=<span class="hljs-string">&quot;src/main/java&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;enableSubPackages&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">javaClientGenerator</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- 数据库表名及对应的 Java 模型类名 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">tableName</span>=<span class="hljs-string">&quot;t_student&quot;</span> <span class="hljs-attr">domainObjectName</span>=<span class="hljs-string">&quot;Student&quot;</span></span><br><span class="hljs-tag">               <span class="hljs-attr">enableCountByExample</span>=<span class="hljs-string">&quot;false&quot;</span></span><br><span class="hljs-tag">               <span class="hljs-attr">enableUpdateByExample</span>=<span class="hljs-string">&quot;false&quot;</span></span><br><span class="hljs-tag">               <span class="hljs-attr">enableDeleteByExample</span>=<span class="hljs-string">&quot;false&quot;</span></span><br><span class="hljs-tag">               <span class="hljs-attr">enableSelectByExample</span>=<span class="hljs-string">&quot;false&quot;</span></span><br><span class="hljs-tag">               <span class="hljs-attr">selectByExampleQueryId</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">generatorConfiguration</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110172251796.png" srcset="/img/loading.gif" lazyload alt="image-20211017225110748"></p>
<p><strong>根据项目和数据库表的情况，修改GeneratorMapper.xml配置</strong></p>
<p><font color="red">➢ 如果使用高版本，驱动类变为：com.mysql.cj.jdbc.Driver </font><br><font color="red">➢ url 后面应该加属性 nullCatalogMeansCurrent=true，否则生成有问题<br>当前版本 MySQL 数据库为 5.7.18 </font></p>
<h4><span id="5-点击maven插件中的mybatis-generator插件的generate命令">5、点击maven插件中的mybatis-generator插件的generate命令</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110172255031.png" srcset="/img/loading.gif" lazyload alt="image-20211017225549968"></p>
<p>生成相关文件</p>
<h4><span id="6-springboot核心配置文件中配置数据源">6、springboot核心配置文件中配置数据源</span></h4><p>mysql 5的配置</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment"># tomcat端口号</span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">9090</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 上下文根</span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/04-springboot-mybatis</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 数据库配置</span><br><span class="hljs-meta">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><br><span class="hljs-meta">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/springboot?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=Asia/Shanghai</span><br><br><span class="hljs-meta">spring.datasource.username</span>=<span class="hljs-string">root</span><br><span class="hljs-meta">spring.datasource.password</span>=<span class="hljs-string">wangpeng123</span><br></code></pre></div></td></tr></table></figure>

<p>mysql 8的配置</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#配置内嵌Tomcat端口号 </span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">9090</span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#配置项目上下文根 </span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/04-springboot-web-mybatis</span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#配置数据库的连接信息 </span><br><span class="hljs-comment">#注意这里的驱动类有变化</span><br><span class="hljs-meta">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver </span><br><span class="hljs-meta">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/springboot?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=GMT%2B8</span><br><br><span class="hljs-meta">spring.datasource.username</span>=<span class="hljs-string">root</span><br><span class="hljs-meta">spring.datasource.password</span>=<span class="hljs-string">123456</span><br></code></pre></div></td></tr></table></figure>

<p>GMT%2B8表示东八区，也可以使用Asia/Shanghai，表示中国地区</p>
<p>两者的区别，中国在1986-1991年期间使用夏令时，夏季采用东9区（拨快1小时），使用Asia/Shanghai在1986-1991年这段时间就自动调整时区。</p>
<h4><span id="7-写代码">7、写代码</span></h4><p>因为dao层已经帮我们生成了，所以就只需要写service层和controller层的内容。</p>
<p>StudentController</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StudentController</span> </span>&#123; <br> <br>    <span class="hljs-meta">@Autowired</span> <br>    <span class="hljs-keyword">private</span> StudentService studentService; <br> <br>    <span class="hljs-meta">@RequestMapping(value = &quot;/springBoot/student&quot;)</span> <br>    <span class="hljs-keyword">public</span> <span class="hljs-meta">@ResponseBody</span> <span class="hljs-function">Object <span class="hljs-title">student</span><span class="hljs-params">()</span> </span>&#123; <br> <br>        Student student = studentService.queryStudentById(<span class="hljs-number">1</span>); <br> <br>        <span class="hljs-keyword">return</span> student; <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>StudentService</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">StudentService</span> </span>&#123; <br> <br>    <span class="hljs-comment">/** </span><br><span class="hljs-comment">     * 根据学生标识获取学生详情 </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> </span><br><span class="hljs-comment">     */</span> <br>    <span class="hljs-function">Student <span class="hljs-title">queryStudentById</span><span class="hljs-params">(Integer id)</span></span>; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>StudentServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Service</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StudentServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">StudentService</span> </span>&#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> StudentMapper studentMapper;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Student <span class="hljs-title">queryStudentById</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> studentMapper.selectByPrimaryKey(id);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="8-mapper注解">8、@Mapper注解</span></h4><p>给反向生成的 StudentMapper 接口上加一个 Mapper 注解</p>
<p>@Mapper 作用：mybatis 自动扫描数据持久层的映射文件及 DAO 接口的关系</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">StudentMapper</span> </span>&#123;<br>    ...<br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="9-注意">9、注意</span></h4><p>默认情况下，Mybatis 的 xml 映射文件不会编译到 target 的 class 目录下，所<br>以我们需要在 pom.xml 文件中配置 resource</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="10-测试运行">10、测试运行</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110172302893.png" srcset="/img/loading.gif" lazyload alt="image-20211017230214839"></p>
<h3><span id="dao的其他开发方式">Dao的其他开发方式</span></h3><h4><span id="mapperscan注解">@MapperScan注解</span></h4><p>在 运 行 的 主 类 上 添 加 注 解 包 扫 描<br>@MapperScan(“com.abc.springboot.mapper”)</p>
<p>在运行主类 Application 上加@MapperScan(“com.abc.springboot.mapper”)</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span> <br><span class="hljs-meta">@MapperScan(basePackages = &quot;com.abc.springboot.mapper&quot;)</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123;<br>    ...<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>《basePackages = 》可以省略</p>
<p>开启了扫描注解，扫描数据持久层的mapper映谢配置文件，就不用写@Mapper注解了，更加方便。</p>
<h3><span id="将接口和映射文件分开">将接口和映射文件分开</span></h3><p>因为 SpringBoot 不能自动编译接口映射的 xml 文件，还需要手动在 pom 文件中指定，所以有的公司直接将映射文件直接放到resources 目录下</p>
<p>在 resources 目录下新建目录 mapper 存放映射文件，将 StudentMapper.xml 文件移到 resources/mapper 目录下</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110181539638.png" srcset="/img/loading.gif" lazyload alt="image-20211018153908532"></p>
<p>在 application.properties 配置文件中指定映射文件的位置，<font color="red">这个配置只有接口和映射文件不在同一个包的情况下，才需要指定</font></p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment"># 指定Mybatis映射文件的路径 </span><br><span class="hljs-meta">mybatis.mapper-locations</span>=<span class="hljs-string">classpath:mapper/*.xml</span><br></code></pre></div></td></tr></table></figure>

<p>当然这时候，pom.xml的resource也可以不打包javad里的xml了。</p>
<h3><span id="事务支持">事务支持</span></h3><p>Spring Boot 使用事务非常简单，底层依然采用的是 Spring 本身提供的事务管理</p>
<p>在<font color="red">入口类中使用注解 @EnableTransactionManagement 开启事务支持</font></p>
<p>在访问数据库的<font color="red"> Service 方法上添加注解 @Transactional </font>即可</p>
<p>懒得测试了</p>
<h3><span id="springboot下的springmvc">SpringBoot下的SpringMVC</span></h3><h4><span id="controller">@Controller</span></h4><p>Spring MVC 的注解，处理 http 请求</p>
<h4><span id="restcontroller">@RestController</span></h4><p>Spring 4 后新增注解，是@Controller 注解功能的增强<br><font color="red">是 @Controller 与@ResponseBody 的组合注解 </font><br>如果一个 Controller 类添加了@RestController，那么该Controller 类下的<font color="red">所有方法都相当于添加了@ResponseBody 注解</font>，用于返回字符串或json 数据 </p>
<p>演示</p>
<p>创建 MyRestController 类，演示@RestController 替代@Controller + @ResponseBody</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRestController</span> </span>&#123; <br>    <span class="hljs-meta">@Autowired</span> <br>    <span class="hljs-keyword">private</span> StudentService studentService; <br> <br>    <span class="hljs-meta">@RequestMapping(&quot;/boot/stu&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">stu</span><span class="hljs-params">()</span></span>&#123; <br>        <span class="hljs-keyword">return</span> studentService.getStudentById(<span class="hljs-number">1</span>); <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>启动应用，浏览器访问测试</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110181546312.png" srcset="/img/loading.gif" lazyload alt="image-20211018154634272"></p>
<h4><span id="requestmapping常用">@RequestMapping（常用）</span></h4><p>支持Get 请求，也支持Post 请求</p>
<h4><span id="getmapping">@GetMapping</span></h4><p>RequestMapping 和 Get 请求方法的组合<br><font color="red">只支持 Get 请求 </font><br>Get 请求主要用于<font color="red">查询操作</font></p>
<h4><span id="postmapping">@PostMapping</span></h4><p>RequestMapping 和 Post 请求方法的组合</p>
<p><font color="red">只支持 Post 请求 </font><br>Post 请求主要用户<font color="red">新增数据</font></p>
<h4><span id="putmapping">@PutMapping</span></h4><p>RequestMapping 和 Put 请求方法的组合</p>
<p><font color="red">只支持 Put 请求</font></p>
<p>Put 通常用于<font color="red">修改数据</font></p>
<h4><span id="deletemapping">@DeleteMapping</span></h4><p>RequestMapping 和 Delete 请求方法的组合<br><font color="red">只支持 Delete 请求 </font><br>通常用于<font color="red">删除数据 </font></p>
<h4><span id="演示各种注解">演示各种注解</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"> <br><span class="hljs-comment">/** </span><br><span class="hljs-comment"> * 该案例主要演示了使用Spring提供的不同注解接收不同类型的请求 </span><br><span class="hljs-comment"> */</span> <br><span class="hljs-comment">//RestController注解相当于加了给方法加了@ResponseBody注解，所以是不能跳转页面的，</span><br>只能返回字符串或者json数据 <br><span class="hljs-meta">@RestController</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MVCController</span> </span>&#123; <br> <br>    <span class="hljs-meta">@GetMapping(value = &quot;/query&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">get</span><span class="hljs-params">()</span> </span>&#123; <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;@GetMapping注解,通常查询时使用&quot;</span>; <br>    &#125; <br> <br> <br>    <span class="hljs-meta">@PostMapping(value = &quot;/add&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>&#123; <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;@PostMapping注解，通常新增时使用&quot;</span>; <br>    &#125; <br> <br>    <span class="hljs-meta">@PutMapping(value = &quot;/modify&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">modify</span><span class="hljs-params">()</span> </span>&#123; <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;@PutMapping注解，通常更新数据时使用&quot;</span>; <br>    &#125; <br> <br>    <span class="hljs-meta">@DeleteMapping(value = &quot;/remove&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">remove</span><span class="hljs-params">()</span> </span>&#123; <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;@DeleteMapping注解，通常删除数据时使用&quot;</span>; <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="http-接口请求工具-postman-介绍">Http 接口请求工具 Postman 介绍</span></h4><p>因为通过浏览器输入地址，默认发送的只能是 get 请求，通过 Postman 工具，可以模拟发送不同类型的请求，并查询结果，在安装的时候，有些机器可能会需要安装MicroSort .NET Framework</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110181549945.png" srcset="/img/loading.gif" lazyload alt="image-20211018154950884"></p>
<p>使用 Postman 对其它请求类型做个测试</p>
<h3><span id="spring-boot-实现-restful">Spring Boot 实现 RESTful</span></h3><h4><span id="认识-restful">认识 RESTFul</span></h4><p>REST（英文：Representational State Transfer，简称 REST）</p>
<p>一种互联网软件架构设计的风格，但它并不是标准，它只是提出了一组客户端和服务器交互时的架构理念和设计原则，基于这种理念和原则设计的接口可以更简洁，更有层次。</p>
<p>任何的技术都可以实现这种理念，如果一个架构符合 REST 原则，就称它为 RESTFul 架构</p>
<p>比如我们要访问一个http 接口：<a target="_blank" rel="noopener" href="http://localhost:8080/boot/order?id=1021&amp;status=1">http://localhost:8080/boot/order?id=1021&amp;status=1</a></p>
<p>采用RESTFul 风格则 http 地址为：<a target="_blank" rel="noopener" href="http://localhost:8080/boot/order/1021/1">http://localhost:8080/boot/order/1021/1</a></p>
<p>好处是可以混淆参数</p>
<p><strong>Spring boot 开发RESTFul 主要是几个注解实现</strong></p>
<h4><span id="pathvariable">@PathVariable</span></h4><p>获取url 中的数据<br><font color="red">该注解是实现 RESTFul 最主要的一个注解</font></p>
<h4><span id="postmapping">@PostMapping</span></h4><p>接收和处理Post 方式的请求 </p>
<h4><span id="deletemapping">@DeleteMapping</span></h4><p>接收delete 方式的请求，可以使用 GetMapping 代替</p>
<h4><span id="putmapping">@PutMapping</span></h4><p>接收put 方式的请求，可以用PostMapping 代替</p>
<h4><span id="getmapping">@GetMapping</span></h4><p>接收get 方式的请求</p>
<h4><span id="案例使用-restful-风格模拟实现对学生的增删改查操作">案例：使用 RESTful 风格模拟实现对学生的增删改查操作</span></h4><h5><span id="相关依赖">相关依赖</span></h5><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span> <br>    <span class="hljs-comment">&lt;!--SpringBoot框架web项目起步依赖--&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span> <br><br>    <span class="hljs-comment">&lt;!--MyBatis集成SpringBoot框架起步依赖--&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--MySQL驱动--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span> <br><br><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span> <br>    <span class="hljs-comment">&lt;!--指定配置资源的位置--&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span> <br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span> <br>            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--mybatis代码自动生成插件--&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.generator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span> <br>                <span class="hljs-comment">&lt;!--配置文件的位置--&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">configurationFile</span>&gt;</span>GeneratorMapper.xml<span class="hljs-tag">&lt;/<span class="hljs-name">configurationFile</span>&gt;</span> <br>                <span class="hljs-tag">&lt;<span class="hljs-name">verbose</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">verbose</span>&gt;</span> <br>                <span class="hljs-tag">&lt;<span class="hljs-name">overwrite</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">overwrite</span>&gt;</span> <br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span> <br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p>没有啥特别的</p>
<h5><span id="核心配置文件">核心配置文件</span></h5><figure class="highlight yaml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span> <br><span class="hljs-attr">port:</span> <span class="hljs-number">8090</span><br>	<span class="hljs-comment">#设置Tomcat内嵌端口号 </span><br>	<span class="hljs-attr">servlet:</span> <br>		<span class="hljs-attr">context-path:</span> <span class="hljs-string">/</span> <span class="hljs-comment">#设置上下文根 </span><br><br><span class="hljs-comment">#配置数据源 </span><br><span class="hljs-attr">spring:</span> <br>  <span class="hljs-attr">datasource:</span> <br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span> <br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/springboot?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span> <br>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span> <br></code></pre></div></td></tr></table></figure>

<p>也没有啥特别的</p>
<h5><span id="通过逆向工程生成-dao">通过逆向工程生成 DAO</span></h5><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191929979.png" srcset="/img/loading.gif" lazyload alt="image-20211019192915895"></p>
<h5><span id="创建-restfulcontroller并编写代码">创建 RESTfulController，并编写代码</span></h5><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RESTfulController</span> </span>&#123; <br><br>    <span class="hljs-comment">/** </span><br><span class="hljs-comment">     * 添加学生 </span><br><span class="hljs-comment">     * 请求地址：</span><br><span class="hljs-comment">http://localhost:9090/014-springboot-restful/springBoot/student/wangpeng/23 </span><br><span class="hljs-comment">     * 请求方式：POST </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> name </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> age </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> </span><br><span class="hljs-comment">     */</span> <br>    <span class="hljs-meta">@PostMapping(value = &quot;/springBoot/student/&#123;name&#125;/&#123;age&#125;&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">addStudent</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;name&quot;)</span> String name, </span></span><br><span class="hljs-params"><span class="hljs-function">                             <span class="hljs-meta">@PathVariable(&quot;age&quot;)</span> Integer age)</span> </span>&#123; <br><br>        Map&lt;String,Object&gt; retMap = <span class="hljs-keyword">new</span> HashMap&lt;String, Object&gt;(); <br>        retMap.put(<span class="hljs-string">&quot;name&quot;</span>,name); <br>        retMap.put(<span class="hljs-string">&quot;age&quot;</span>,age); <br><br>        <span class="hljs-keyword">return</span> retMap; <br>    &#125;<br>    <span class="hljs-comment">/** </span><br><span class="hljs-comment">     * 删除学生 </span><br><span class="hljs-comment">     * 请求地址：</span><br><span class="hljs-comment">http://localhost:9090/014-springboot-restful/springBoot/student/1 </span><br><span class="hljs-comment">     * 请求方式：Delete </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> </span><br><span class="hljs-comment">     */</span> <br>    <span class="hljs-meta">@DeleteMapping(value = &quot;/springBoot/student/&#123;id&#125;&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">removeStudent</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> </span>&#123; <br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;删除的学生id为：&quot;</span> + id; <br>    &#125; <br><br>    <span class="hljs-comment">/** </span><br><span class="hljs-comment">     * 修改学生信息 </span><br><span class="hljs-comment">     * 请求地址：</span><br><span class="hljs-comment">http://localhost:9090/014-springboot-restful/springBoot/student/2 </span><br><span class="hljs-comment">     * 请求方式：Put </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> </span><br><span class="hljs-comment">     */</span> <br>    <span class="hljs-meta">@PutMapping(value = &quot;/springBoot/student/&#123;id&#125;&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">modifyStudent</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> </span>&#123; <br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;修改学生的id为&quot;</span> + id; <br>    &#125; <br><br>    <span class="hljs-meta">@GetMapping(value = &quot;/springBoot/student/&#123;id&#125;&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">queryStudent</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> </span>&#123; <br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;查询学生的id为&quot;</span> + id; <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>



<p>然后运行测试一下</p>
<h4><span id="总结">总结</span></h4><p>传递参数变简单了</p>
<p>服务提供者对外只提供了一个接口服务，而不是传统的 CRUD 四个接口</p>
<h4><span id="请求冲突的问题">请求冲突的问题</span></h4><p>➢ 改路径<br>➢ 改请求方式 </p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191934743.png" srcset="/img/loading.gif" lazyload alt="image-20211019193425711"></p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191934836.png" srcset="/img/loading.gif" lazyload alt="image-20211019193430802"></p>
<p>上面两个不会冲突，因为路径不一样</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191934836.png" srcset="/img/loading.gif" lazyload alt="image-20211019193430802"></p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191934132.png" srcset="/img/loading.gif" lazyload alt="image-20211019193448098"></p>
<p>上面两个会冲突，因为不会分辨名字，只会分辨位置。</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191934132.png" srcset="/img/loading.gif" lazyload alt="image-20211019193448098"></p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191935562.png" srcset="/img/loading.gif" lazyload alt="image-20211019193556520"></p>
<p>上面两个不会冲突，因为请求方式不一样</p>
<h4><span id="restful-原则">RESTful 原则</span></h4><p>➢ 增 post 请求、删 delete 请求、改 put 请求、查 get 请求<br>➢ <font color="red">请求路径不要出现动词</font><br>例如：查询订单接口<br><font color="red"> /boot/order/1021/1（推荐） </font><br> /boot/queryOrder/1021/1（不推荐）<br>➢ <font color="red">分页、排序等操作，不需要使用斜杠传参数</font><br>例如：订单列表接口<br> /boot/orders?page=1&amp;sort=desc<br>一般传的参数不是数据库表的字段，可以不采用斜杠 </p>
<p><font color="red">数据库表的字段，才使用斜杠</font></p>
<h3><span id="spring-boot-集成-redis">Spring Boot 集成 Redis</span></h3><h4><span id="1-生成bean和持久层">1、生成bean和持久层</span></h4><p>首先通过 MyBatis 逆向工程生成实体 bean 和数据持久层</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191937929.png" srcset="/img/loading.gif" lazyload alt="image-20211019193747882"></p>
<h4><span id="2-添加-redis-依赖">2、添加 redis 依赖</span></h4><p>在 pom.xml 文件中添加 redis 依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 加载 spring boot redis包 --&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="3-spring-boot-核心配置文件">3、Spring Boot 核心配置文件</span></h4><p>多配置一个redis</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#配置内嵌Tomcat端口号 </span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">9090 </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#配置项目上下文根 </span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/016-springboot-redis </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#配置连接MySQL数据库信息 </span><br><span class="hljs-meta">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://192.168.92.134:3306/springboot?useUnicode</span><br>=<span class="hljs-meta">true&amp;characterEncoding</span>=<span class="hljs-string">UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDa</span><br><span class="hljs-attr">tetimeCode</span>=<span class="hljs-string">false&amp;serverTimezone=UTC </span><br><span class="hljs-meta">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver </span><br><span class="hljs-meta">spring.datasource.username</span>=<span class="hljs-string">root </span><br><span class="hljs-meta">spring.datasource.password</span>=<span class="hljs-string">123456 </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">#配置redis连接信息 </span><br><span class="hljs-meta">spring.redis.host</span>=<span class="hljs-string">192.168.92.134 </span><br><span class="hljs-meta">spring.redis.port</span>=<span class="hljs-string">6379 </span><br><span class="hljs-meta">spring.redis.password</span>=<span class="hljs-string">123456</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="4-启动-redis-服务">4、启动 redis 服务</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191939273.png" srcset="/img/loading.gif" lazyload alt="image-20211019193923230"></p>
<h4><span id="5-rediscontroller-类">5、RedisController 类</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RedisController</span> </span>&#123; <br> <br>    <span class="hljs-meta">@Autowired</span> <br>    <span class="hljs-keyword">private</span> StudentService studentService; <br> <br>    <span class="hljs-comment">/** </span><br><span class="hljs-comment">     * 请求地址：</span><br><span class="hljs-comment">http://localhost:9090/016-springboot-redis//springboot/allStudentCount </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> request </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> </span><br><span class="hljs-comment">     */</span> <br>    <span class="hljs-meta">@GetMapping(value = &quot;/springboot/allStudentCount&quot;)</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">allStudentCount</span><span class="hljs-params">(HttpServletRequest request)</span> </span>&#123; <br> <br>        Long allStudentCount = studentService.queryAllStudentCount(); <br> <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;学生总人数：&quot;</span> + allStudentCount; <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="6-studentservice-接口和studentserviceimpl实现类">6、StudentService 接口和StudentServiceImpl实现类</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">StudentService</span> </span>&#123;<br>        <span class="hljs-comment">/** </span><br><span class="hljs-comment">     * 获取学生总人数 </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> </span><br><span class="hljs-comment">     */</span> <br>    <span class="hljs-function">Long <span class="hljs-title">queryAllStudentCount</span><span class="hljs-params">()</span></span>; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>配置了上面的步骤，Spring</p>
<p>Boot 将自动配置 RedisTemplate，在需要操作 redis 的类中</p>
<p>注入redisTemplate 即可。 </p>
<p>注意：<font color="red">Spring Boot 帮我们注入 RedisTemplate 类，泛型里面只能写 &lt;String, String&gt;、&lt;Object, Object&gt;或者什么都不写</font></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Service</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StudentServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">StudentService</span> </span>&#123; <br><br>    <span class="hljs-meta">@Autowired</span> <br>    <span class="hljs-keyword">private</span> StudentMapper studentMapper; <br><br>    <span class="hljs-meta">@Autowired</span> <br>    <span class="hljs-keyword">private</span> RedisTemplate&lt;Object,Object&gt; redisTemplate; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Long <span class="hljs-title">queryAllStudentCount</span><span class="hljs-params">()</span> </span>&#123; <br><br>        <span class="hljs-comment">//设置redisTemplate对象key的序列化方式 </span><br>        redisTemplate.setKeySerializer(<span class="hljs-keyword">new</span> StringRedisSerializer()); <br><br>        <span class="hljs-comment">//从redis缓存中获取总人数 </span><br>        Long allStudentCount = (Long) <br>            redisTemplate.opsForValue().get(<span class="hljs-string">&quot;allStudentCount&quot;</span>); <br>        <span class="hljs-comment">//判断是否为空 </span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">null</span> == allStudentCount) &#123; <br>            <span class="hljs-comment">//去数据库查询，并存放到redis缓存中</span><br>            allStudentCount = studentMapper.selectAllStudentCount(); <br><br>            redisTemplate.opsForValue().set(<span class="hljs-string">&quot;allStudentCount&quot;</span>,allStudentCount,<span class="hljs-number">15</span>, <br>                                            TimeUnit.SECONDS); <br>        &#125; <br>        <span class="hljs-keyword">return</span> allStudentCount; <br>    &#125; <br>&#125; <br></code></pre></div></td></tr></table></figure>



<h4><span id="7-studentmapper-接口和studentmapper-映射文件">7、StudentMapper 接口和StudentMapper 映射文件</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/** </span><br><span class="hljs-comment"> * 获取学生总人数 </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> </span><br><span class="hljs-comment"> */</span> <br><span class="hljs-function">Long <span class="hljs-title">selectAllStudentCount</span><span class="hljs-params">()</span></span>;<br></code></pre></div></td></tr></table></figure>

<p>映射文件</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--获取学生总人数--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAllStudentCount&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.Long&quot;</span>&gt;</span> <br>    select <br>      count(*) <br>    from <br>      t_student <br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="8-添加mapperscan注解并启动">8、添加MapperScan注解并启动</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span> <br><span class="hljs-meta">@MapperScan(basePackages = &quot;com.abc.springboot.mapper&quot;)</span><span class="hljs-comment">//扫描数据持久层 </span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123;<br>      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123; <br>        SpringApplication.run(Application.class, args); <br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="9-让-student-类实现序列化接口可选">9、让 Student 类实现序列化接口（可选）</span></h4><p>在类名上 Alt + 回车，如果没有提示生成序列化 id，那么需要做如下的配置</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191943992.png" srcset="/img/loading.gif" lazyload alt="image-20211019194318908"></p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191943004.png" srcset="/img/loading.gif" lazyload alt="image-20211019194322962"></p>
<h4><span id="10-启动-springboot-应用访问测试">10、启动 SpringBoot 应用，访问测试</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110191943421.png" srcset="/img/loading.gif" lazyload alt="image-20211019194338382"></p>
<h3><span id="spring-boot-集成-dubbo">Spring Boot 集成 Dubbo</span></h3><h4><span id="1-新建接口工程">1、新建接口工程</span></h4><p>接口工程是普通的java maven工程。</p>
<h4><span id="2-新建实体bean">2、新建实体Bean</span></h4><p>com.wangpeng.sprintboot.model</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String name;<br>	...<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>注意：<font color="red">一定要集成Serializable，进行序列化</font>，因为dobbo需要在网络中通过二进制数据流传输。</p>
<h4><span id="3-新建service接口">3、新建Service接口</span></h4><p>com.wangpeng.springboot.service</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot.service;<br><br><span class="hljs-keyword">import</span> com.wangpeng.springboot.model.User;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findUserById</span><span class="hljs-params">(Integer id)</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="4-新建提供者工程">4、新建提供者工程</span></h4><p>pom.xml如下</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>	<span class="hljs-comment">&lt;!--父工程--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>	<span class="hljs-comment">&lt;!--项目GAV坐标--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.wangpeng.springboot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot-dubbo-provider<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--spingboot web 起步依赖--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--dubbo集成springboot起步依赖--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--注册中心--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.101tec<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zkclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--接口工程--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.wangpeng.springboot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>05-springboot-dubbo-interface<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--springboot编译打包插件--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>分析一下，需要导入几个依赖</p>
<ol>
<li>  dubbo集成springboot起步依赖</li>
<li>  注册中心</li>
<li>  接口工程</li>
</ol>
<h4><span id="5-提供者工程配置文件">5、提供者工程配置文件</span></h4><figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment"># 设置端口号</span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">8081</span><br><span class="hljs-comment"># 上下文根</span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># dubbo的设置</span><br><span class="hljs-comment"># 应用名字</span><br><span class="hljs-meta">spring.application.name</span>=<span class="hljs-string">springboot-dubbo-provider</span><br><span class="hljs-comment"># 是服务提供者</span><br><span class="hljs-meta">spring.dubbo.server</span>=<span class="hljs-string">true</span><br><span class="hljs-comment"># 设置注册中心</span><br><span class="hljs-meta">spring.dubbo.registry</span>=<span class="hljs-string">zookeeper://192.168.199.134:2181</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="6-application中开启dubbo配置">6、Application中开启dubbo配置</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot;<br><br><span class="hljs-keyword">import</span> com.alibaba.dubbo.spring.boot.annotation.EnableDubboConfiguration;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableDubboConfiguration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(Application.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>@EnableDubboConfiguration 注解开启dubbo配置，这样才能解析配置文件的内容。</p>
<h4><span id="7-新建service接口实现类">7、新建Service接口实现类</span></h4><p>com.wangpeng.springboot.impl.UserServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot.service.impl;<br><br><span class="hljs-keyword">import</span> com.alibaba.dubbo.config.annotation.Service;<br><span class="hljs-keyword">import</span> com.wangpeng.springboot.model.User;<br><span class="hljs-keyword">import</span> com.wangpeng.springboot.service.UserService;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Service(interfaceClass = UserService.class, version = &quot;1.0.0&quot;, timeout = 15000)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findUserById</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br>        User user = <span class="hljs-keyword">new</span> User();<br>        user.setId(id);<br>        user.setName(<span class="hljs-string">&quot;zhangsan&quot;</span>);<br>        <span class="hljs-keyword">return</span> user;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>

<p>@Component也可以使用spring下的@Service</p>
<p>尤其注意该注解@Service，<font color="red">它是dubbo包下的Service</font>，他是dubbo配置服务的</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Service(interfaceClass = 接口类, version = &quot;版本号&quot;, timeout = 超时时间)</span><br></code></pre></div></td></tr></table></figure>

<p>等等其他的dubbo的配置都可以放在括号中。</p>
<h4><span id="8-新建消费者工程">8、新建消费者工程</span></h4><p><font color="red">pom.xml引入的依赖和提供者一样！</font></p>
<h4><span id="9-消费者工程配置文件">9、消费者工程配置文件</span></h4><figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment"># 设置端口号</span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">8080</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 设置上下文根</span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 设置dubbo</span><br><span class="hljs-comment"># 设置应用名称</span><br><span class="hljs-meta">spring.application.name</span>=<span class="hljs-string">springboot-dubbo-consumer</span><br><span class="hljs-comment"># 指定注册中心</span><br><span class="hljs-meta">spring.dubbo.registry</span>=<span class="hljs-string">zookeeper://192.168.199.134:2181</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="10-application中开启dubbo配置">10、Application中开启dubbo配置</span></h4><p>还是加上该注解</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@EnableDubboConfiguration</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="11-新建controller文件">11、新建Controller文件</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot.controller;<br><br><span class="hljs-keyword">import</span> com.alibaba.dubbo.config.annotation.Reference;<br><span class="hljs-keyword">import</span> com.wangpeng.springboot.model.User;<br><span class="hljs-keyword">import</span> com.wangpeng.springboot.service.UserService;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;<br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br><br>    <span class="hljs-meta">@Reference(interfaceClass = UserService.class, version = &quot;1.0.0&quot;, check = false)</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/user&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-meta">@ResponseBody</span> <span class="hljs-function">User <span class="hljs-title">queryUser</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br>        User user = userService.findUserById(id);<br>        <span class="hljs-keyword">return</span> user;<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>很明显，以前用的@Autowired注解，被@Reference替换了。</p>
<p>该注解就是dubbo消费者中引入接口服务所使用的。</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Reference(interfaceClass = 接口类,version = &quot;版本号&quot;, check = 检查提供者开启与否)</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="12-运行测试">12、运行测试</span></h4><ol>
<li><p>  在Linux中打开zookeeper</p>
</li>
<li><p>  注意一定要关闭防火墙或者开放2181端口！</p>
</li>
<li><p>  启动服务提供者</p>
</li>
<li><p>  启动服务消费者</p>
</li>
<li><p>  浏览器输入请求测试</p>
</li>
</ol>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110221726760.png" srcset="/img/loading.gif" lazyload alt="image-20211022172611652"></p>
<p>得到反馈，测试成功</p>
<h3><span id="springboot-ssm-redis-dubbo集成">SpringBoot SSM、redis、dubbo集成</span></h3><h4><span id="1-新建3个工程">1、新建3个工程</span></h4><ul>
<li>  接口工程</li>
<li>  提供者工程</li>
<li>  消费者工程</li>
</ul>
<p>在接口工程中，新建2个package，model和service</p>
<p>在提供者工程中，新建2个package，mapper和service</p>
<p>在消费者工程中，新建1个package，controller（或者web）</p>
<p>配置maven，注意，不要多写依赖，可能会导致未知的问题。</p>
<p>提供者工程pom.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--父工程--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--项目GAV坐标--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.wangpeng.springboot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot-all-provider<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--springboot web起步依赖--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--Dubbo集成SpringBoot起步依赖--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--注册中心--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.101tec<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zkclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--mybatis整合springboot起步依赖--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--mysql--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--SpringBoot集成Redis起步依赖--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--接口工程--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.wangpeng.springboot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>08-springboot-all-interface<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--资源路径--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--资源路径--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--mysql反向工程插件--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.generator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!--配置文件的位置--&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">configurationFile</span>&gt;</span>GeneratorMapper.xml<span class="hljs-tag">&lt;/<span class="hljs-name">configurationFile</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">verbose</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">verbose</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">overwrite</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">overwrite</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--springboot编译打包插件--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>消费者工程pom.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--父工程--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--项目GAV坐标--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.wangpeng.springboot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot-all-consumer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--springboot web 起步依赖--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--Dubbo集成SpringBoot起步依赖--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--注册中心--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.101tec<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zkclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--springboot集成jsp--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--接口工程--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.wangpeng.springboot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>08-springboot-all-interface<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--jsp指定编译目录--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>                <span class="hljs-comment">&lt;!--源文件位置--&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/webapp<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>                <span class="hljs-comment">&lt;!--目标位置--&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">targetPath</span>&gt;</span>META-INF/resources<span class="hljs-tag">&lt;/<span class="hljs-name">targetPath</span>&gt;</span><br>                <span class="hljs-comment">&lt;!--指定文件--&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>*.*<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--编译打包插件--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="2-在提供者工程中配置mysql反向工程">2、在提供者工程中，配置mysql反向工程</span></h4><p>在pom.xml中添加mysql反向工程插件</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.generator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--配置文件的位置--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">configurationFile</span>&gt;</span>GeneratorMapper.xml<span class="hljs-tag">&lt;/<span class="hljs-name">configurationFile</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">verbose</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">verbose</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">overwrite</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">overwrite</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>复制配置文件到提供者工程的根目录</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110231406240.png" srcset="/img/loading.gif" lazyload alt="image-20211023140605163"></p>
<p>在配置文件中，注意以下配置</p>
<ol>
<li>  配置数据库连接信息</li>
<li>  配置model类的目录，注意，因为这个目录不在当前项目中，所以不能使用相对路径，需要到explorer中复制在计算机中的绝对路径</li>
</ol>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110231408934.png" srcset="/img/loading.gif" lazyload alt="image-20211023140825862"></p>
<ol start="3">
<li>  mapper.xml就在当前提供者项目，没问题</li>
<li>  mapper的接口也在当前提供者项目中，没问题</li>
<li>  表名看一下</li>
</ol>
<p>然后就可以进行反向工程生成了</p>
<h4><span id="3-提供者工程的配置文件">3、提供者工程的配置文件</span></h4><figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment"># 端口号</span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">8081</span><br><span class="hljs-comment"># 上下文根</span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 配置数据库</span><br><span class="hljs-comment"># 数据库配置</span><br><span class="hljs-meta">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-meta">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/springboot?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=Asia/Shanghai</span><br><span class="hljs-meta">spring.datasource.username</span>=<span class="hljs-string">root</span><br><span class="hljs-meta">spring.datasource.password</span>=<span class="hljs-string">wangpeng123</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 配置dubbo</span><br><span class="hljs-meta">spring.application.name</span>=<span class="hljs-string">springboot-all-provider</span><br><span class="hljs-meta">spring.dubbo.server</span>=<span class="hljs-string">true</span><br><span class="hljs-meta">spring.dubbo.registry</span>=<span class="hljs-string">zookeeper://192.168.199.134:2181</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 配置redis</span><br><span class="hljs-meta">spring.redis.host</span>=<span class="hljs-string">192.168.199.134</span><br><span class="hljs-meta">spring.redis.port</span>=<span class="hljs-string">6379</span><br><span class="hljs-comment"># spring.redis.password=</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="4-serviceimpl">4、ServiceImpl</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot.service;<br><br><span class="hljs-keyword">import</span> com.alibaba.dubbo.config.annotation.Service;<br><span class="hljs-keyword">import</span> com.wangpeng.springboot.mapper.StudentMapper;<br><span class="hljs-keyword">import</span> com.wangpeng.springboot.model.Student;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Service(interfaceName = &quot;com.wangpeng.springboot.service.StudentService&quot;, version = &quot;1.0.0&quot;, timeout = 15000)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StudentServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">StudentService</span></span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> StudentMapper studentMapper;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RedisTemplate&lt;Object,Object&gt; redisTemplate;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Student <span class="hljs-title">queryStudentById</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br>        Student student = studentMapper.selectByPrimaryKey(id);<br>        <span class="hljs-keyword">return</span> student;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">queryAllStudentCount</span><span class="hljs-params">()</span> </span>&#123;<br><br>        <span class="hljs-comment">//提升系统性能,用户体验提升</span><br>        <span class="hljs-comment">//首先去redis缓存中查询,如果有:直接使用,如果没有:去数据库查询并存放到redis缓存中</span><br>        Integer allStudentCount = (Integer) redisTemplate.opsForValue().get(<span class="hljs-string">&quot;allStudentCount&quot;</span>);<br><br>        <span class="hljs-comment">//判断是否有值</span><br>        <span class="hljs-keyword">if</span> (allStudentCount == <span class="hljs-keyword">null</span>) &#123;<br><br>            <span class="hljs-comment">//去数据库查询</span><br>            allStudentCount = studentMapper.selectAllStudentCount();<br><br>            <span class="hljs-comment">//并存放到redis缓存中</span><br>            redisTemplate.opsForValue().set(<span class="hljs-string">&quot;allStudentCount&quot;</span>,allStudentCount,<span class="hljs-number">30</span>, TimeUnit.SECONDS);<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> allStudentCount;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>

<p>老规矩，不多说</p>
<h4><span id="5-提供者工程application的2个注解">5、提供者工程application的2个注解</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot;<br><br><span class="hljs-keyword">import</span> com.alibaba.dubbo.spring.boot.annotation.EnableDubboConfiguration;<br><span class="hljs-keyword">import</span> org.mybatis.spring.annotation.MapperScan;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@MapperScan(&quot;com.wangpeng.springboot.mapper&quot;)</span><br><span class="hljs-meta">@EnableDubboConfiguration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(Application.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="6-消费者工程的配置文件">6、消费者工程的配置文件</span></h4><figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment"># 端口号</span><br><span class="hljs-meta">server.port</span>=<span class="hljs-string">8080</span><br><span class="hljs-comment"># 上下文</span><br><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># dubbo配置</span><br><span class="hljs-meta">spring.application.name</span>=<span class="hljs-string">springboot-all-consumer</span><br><span class="hljs-meta">spring.dubbo.registry</span>=<span class="hljs-string">zookeeper://192.168.199.134:2181</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 视图解析器</span><br><span class="hljs-meta">spring.mvc.view.prefix</span>=<span class="hljs-string">/</span><br><span class="hljs-meta">spring.mvc.view.suffix</span>=<span class="hljs-string">.jsp</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="7-消费者工程的controller">7、消费者工程的controller</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot.controller;<br><br><span class="hljs-keyword">import</span> com.alibaba.dubbo.config.annotation.Reference;<br><span class="hljs-keyword">import</span> com.wangpeng.springboot.model.Student;<br><span class="hljs-keyword">import</span> com.wangpeng.springboot.service.StudentService;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<br><span class="hljs-keyword">import</span> org.springframework.ui.Model;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PathVariable;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;<br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StudentController</span> </span>&#123;<br><br>    <span class="hljs-meta">@Reference(interfaceName = &quot;com.wangpeng.springboot.service.StudentService&quot;, version = &quot;1.0.0&quot;, check = false)</span><br>    <span class="hljs-keyword">private</span> StudentService studentService;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/student/detail/&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">studentDetail</span><span class="hljs-params">(Model model, <span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> </span>&#123;<br>        Student student = studentService.queryStudentById(id);<br>        model.addAttribute(<span class="hljs-string">&quot;student&quot;</span>, student);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;studentDetail&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(value = &quot;/student/all/count&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function">Object <span class="hljs-title">allStudentCount</span><span class="hljs-params">()</span> </span>&#123;<br><br>        Integer allStudentCount = studentService.queryAllStudentCount();<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;学生总人数为:&quot;</span>+allStudentCount;<br>    &#125;<br><br>&#125;<br><br></code></pre></div></td></tr></table></figure>

<p>老规矩，不多说</p>
<h4><span id="8-消费者工程application的1个注解">8、消费者工程application的1个注解</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot;<br><br><span class="hljs-keyword">import</span> com.alibaba.dubbo.spring.boot.annotation.EnableDubboConfiguration;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableDubboConfiguration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(Application.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="9-jsp文件">9、jsp文件</span></h4><figure class="highlight jsp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsp">&lt;%--<br>  Created by IntelliJ IDEA.<br>  User: wangpeng<br>  Date: <span class="hljs-number">2021</span>/<span class="hljs-number">10</span>/<span class="hljs-number">22</span><br>  Time: <span class="hljs-number">23</span>:<span class="hljs-number">46</span><br>  To change <span class="hljs-keyword">this</span> template use File | Settings | File Templates.<br>--%&gt;<br>&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;学生详情&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;h1&gt;学生编号:$&#123;student.id&#125;&lt;/h1&gt;<br>&lt;h1&gt;学生姓名:$&#123;student.name&#125;&lt;/h1&gt;<br>&lt;h1&gt;学生年龄:$&#123;student.age&#125;&lt;/h1&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></div></td></tr></table></figure>



<h4><span id="10-运行测试">10、运行测试</span></h4><ul>
<li>  先检查linux中的redis和zookeeper是否开启</li>
<li>  run提供者工程</li>
<li>  run消费者工程</li>
</ul>
<h2><span id="第4章-springboot-非web-和-改图标了解">第4章 SpringBoot 非web 和 改图标（了解）</span></h2><h3><span id="方式一获取spring容器对象再获取业务bean调用">方式一：获取spring容器对象，再获取业务bean调用</span></h3><p>直接在 main 方法中，根据 SpringApplication.run()方法获取返回的 Spring 容器对象，再获取业务 bean 进行调用</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110231502616.png" srcset="/img/loading.gif" lazyload alt="image-20211023150221528"></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.abc.springboot; <br><br><span class="hljs-keyword">import</span> com.abc.springboot.service.UserService; <br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication; <br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication; <br><span class="hljs-keyword">import</span> org.springframework.context.ConfigurableApplicationContext; <br><br><span class="hljs-meta">@SpringBootApplication</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123; <br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123; <br><br>        <span class="hljs-comment">/** </span><br><span class="hljs-comment">         * SpringBoot程序启动后，返回值是ConfigurableApplicationContext，它也是一个</span><br><span class="hljs-comment">Spring容器对象 </span><br><span class="hljs-comment">         * 它其它相当于原来Spring中启动容器ClassPathXmlApplicationContext context = </span><br><span class="hljs-comment">new ClassPathXmlApplicationContext(&quot;&quot;); </span><br><span class="hljs-comment">         */</span> <br><br>        <span class="hljs-comment">//获取SpringBoot程序启动后的Spring容器 </span><br>        ConfigurableApplicationContext context = <br>            SpringApplication.run(Application.class, args); <br><br>        <span class="hljs-comment">//从Spring容器中获取指定bean的对象 </span><br>        UserService userService = (UserService) <br>            context.getBean(<span class="hljs-string">&quot;userServiceImpl&quot;</span>); <br><br>        <span class="hljs-comment">//调用业务bean的方法 </span><br>        String sayHello = userService.sayHello(); <br><br>        System.out.println(sayHello); <br>    &#125; <br>&#125; <br></code></pre></div></td></tr></table></figure>

<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110231502038.png" srcset="/img/loading.gif" lazyload alt="image-20211023150243946"></p>
<h3><span id="方式二spring-boot-的入口类实现commandlinerunner-接口">方式二：Spring boot 的入口类实现CommandLineRunner 接口</span></h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.abc.springboot; <br><br><span class="hljs-keyword">import</span> com.abc.springboot.service.UserService; <br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired; <br><span class="hljs-keyword">import</span> org.springframework.boot.CommandLineRunner; <br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication; <br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication; <br><br><span class="hljs-meta">@SpringBootApplication</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">CommandLineRunner</span> </span>&#123; <br><br><br>    <span class="hljs-comment">//第二步：通过容器获取bean，并注入给userService </span><br>    <span class="hljs-meta">@Autowired</span> <br>    <span class="hljs-keyword">private</span> UserService userService; <br><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123; <br>        <span class="hljs-comment">//第一步：SpringBoot的启动程序，会初始化spring容器 </span><br>        SpringApplication.run(Application2.class,args); <br>    &#125; <br><br>    <span class="hljs-comment">//覆盖接口中的run方法 </span><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">(String... args)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123; <br><br>        <span class="hljs-comment">//第三步：容器启动后调用run方法，在该方法中调用业务方法 </span><br>        String sayHello = userService.sayHello(); <br><br>        System.out.println(sayHello); <br><br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h3><span id="关闭-springboot-logo-图标及启动日志">关闭 SpringBoot Logo 图标及启动日志</span></h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.abc.springboot; <br><br><span class="hljs-keyword">import</span> org.springframework.boot.Banner; <br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication; <br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication; <br><br><span class="hljs-meta">@SpringBootApplication</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123; <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123; <br>        SpringApplication springApplication =<br>            <span class="hljs-keyword">new</span> SpringApplication(Application.class); <br>        <br>        <span class="hljs-comment">//关闭启动logo的输出</span><br>        springApplication.setBannerMode(Banner.Mode.OFF); <br>        springApplication.run(args); <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h3><span id="修改启动的-logo-图标">修改启动的 logo 图标</span></h3><p>修改前 LOGO</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110231506969.png" srcset="/img/loading.gif" lazyload alt="image-20211023150632886"></p>
<p>在 src/main/resources 放入 banner.txt 文件，该文件名字不能随意，文件中的内容就是要输出的 logo</p>
<p>可 以 利 用 网 站 生 成 图 标 ： <a target="_blank" rel="noopener" href="https://www.bootschool.net/ascii">https://www.bootschool.net/ascii</a> 或 者<br><a target="_blank" rel="noopener" href="http://patorjk.com/software/taag/%EF%BC%8C%E5%B0%86%E7%94%9F%E6%88%90%E5%A5%BD%E7%9A%84%E5%9B%BE%E6%A0%87%E6%96%87%E5%AD%97%E7%B2%98%E8%B4%B4%E5%88%B0">http://patorjk.com/software/taag/，将生成好的图标文字粘贴到</a> banner.txt 文件中，然后将关闭 logo 输出的语句注释，启动看效果</p>
<h2><span id="第5章-springboot使用拦截器">第5章 SpringBoot使用拦截器</span></h2><h3><span id="回顾springmvc使用拦截器步骤">回顾springmvc使用拦截器步骤</span></h3><ul>
<li><p>自定义拦截器类，实现 HandlerInterceptor 接口</p>
<ul>
<li>  在里面重写方法（AOP）</li>
</ul>
</li>
<li><p>在web.xml中注册拦截器类</p>
</li>
</ul>
<h3><span id="springboot-使用拦截器">SpringBoot 使用拦截器</span></h3><h4><span id="1-创建springboot工程模块">1、创建Springboot工程（模块）</span></h4><p>整理一下pom.xml，没什么特别的</p>
<p>springboot配置文件，也没有什么特别的，把端口号和上下文根写一下</p>
<h4><span id="2-新建userinterceptor用户拦截器">2、新建UserInterceptor用户拦截器</span></h4><p>com.wangpeng.springboot.interceptor.UserInterceptor</p>
<p>然后继承HandlerInterceptor，重写方法</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wanpeng.springboot.interceptor;<br><br><span class="hljs-keyword">import</span> com.wanpeng.springboot.User;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.ModelAndView;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">HandlerInterceptor</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        User user = (User) request.getSession().getAttribute(<span class="hljs-string">&quot;user&quot;</span>);<br><br>        <span class="hljs-keyword">if</span>(user == <span class="hljs-keyword">null</span>) &#123;  <span class="hljs-comment">//没有登录</span><br>            <span class="hljs-comment">//重定向</span><br>            response.sendRedirect(request.getContextPath() + <span class="hljs-string">&quot;/user/error&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;   <span class="hljs-comment">//拦截</span><br>        &#125;<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;    <span class="hljs-comment">//放行</span><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">postHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        HandlerInterceptor.<span class="hljs-keyword">super</span>.postHandle(request, response, handler, modelAndView);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterCompletion</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        HandlerInterceptor.<span class="hljs-keyword">super</span>.afterCompletion(request, response, handler, ex);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="3-新建usercontroller">3、新建UserController</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wanpeng.springboot.web;<br><br><span class="hljs-keyword">import</span> com.wanpeng.springboot.User;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;<br><span class="hljs-keyword">import</span> org.springframework.web.context.support.HttpRequestHandlerServlet;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/user/one&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-meta">@ResponseBody</span> <span class="hljs-function">String <span class="hljs-title">one</span><span class="hljs-params">()</span> </span>&#123;  <span class="hljs-comment">//已经登录才可以访问</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;已经登录可以访问了&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/user/error&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-meta">@ResponseBody</span> <span class="hljs-function">String <span class="hljs-title">error</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;你没有登录，不能访问&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/user/login&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-meta">@ResponseBody</span> <span class="hljs-function">String <span class="hljs-title">login</span><span class="hljs-params">(HttpServletRequest req)</span> </span>&#123;<br>        User user = <span class="hljs-keyword">new</span> User();<br>        user.setId(<span class="hljs-number">1001</span>);<br>        user.setName(<span class="hljs-string">&quot;zhangsan&quot;</span>);<br>        user.setAge(<span class="hljs-number">20</span>);<br>        req.getSession().setAttribute(<span class="hljs-string">&quot;user&quot;</span>, user);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;登录成功&quot;</span>;<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>定义3个请求</p>
<ol>
<li>  已登录才能访问的资源</li>
<li>  错误展示</li>
<li>  登录请求</li>
</ol>
<h4><span id="4-写一个配置类configuration">4、写一个配置类，@Configuration</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wanpeng.springboot.config;<br><br><span class="hljs-keyword">import</span> com.wanpeng.springboot.interceptor.UserInterceptor;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;<br><br><span class="hljs-meta">@Configuration</span>  <span class="hljs-comment">//表明是一个配置类</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InterceptorConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">WebMvcConfigurer</span> </span>&#123;    <span class="hljs-comment">//配置webmvc</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> </span>&#123;<br>        <span class="hljs-comment">// 定义需要拦截的路径</span><br>        String[] addPath = &#123;<br>                <span class="hljs-string">&quot;/user/**&quot;</span>,<br>        &#125;;<br>        <span class="hljs-comment">// 定义不需要拦截的路径</span><br>        String[] excludePath = &#123;<br>                <span class="hljs-string">&quot;/user/error&quot;</span>,<br>                <span class="hljs-string">&quot;/user/login&quot;</span><br>        &#125;;<br><br>        registry.addInterceptor(<span class="hljs-keyword">new</span> UserInterceptor())<br>                .addPathPatterns(addPath)<br>                .excludePathPatterns(excludePath);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>添加注解，@Configuration ，表明是一个配置类</p>
<p>类继承于WebMvcConfigurer，重写addInterceptors方法。</p>
<h4><span id="5-运行测试">5、运行测试</span></h4><p>毫无问题</p>
<h2><span id="第6章-springboot中使用servlet了解">第6章 SpringBoot中使用Servlet（了解）</span></h2><h3><span id="方式一-通过注解扫描方式">方式一 通过注解扫描方式</span></h3><h4><span id="1-新建myservlet注解webservlet">1、新建MyServlet，注解@WebServlet</span></h4><p>继承HttpServlet，重写doGet和doPost方法；添加WebServlet，参数是请求路径</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(urlPatterns = &quot;/myServlet&quot;)</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123; <br>        response.getWriter().print(<span class="hljs-string">&quot;My SpringBoot Servlet&quot;</span>); <br>        response.getWriter().flush(); <br>        response.getWriter().close(); <br>    &#125; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123; <br>        doGet(request,response); <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="2-在application上添加注解servletcomponentscan">2、在Application上添加注解@ServletComponentScan</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span> <br><span class="hljs-meta">@ServletComponentScan(basePackages = &quot;com.abc.springboot.servlet&quot;)</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123; <br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123; <br>        SpringApplication.run(Application.class, args); <br>    &#125; <br> <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="3-运行测试">3、运行测试</span></h4><p>正常</p>
<h3><span id="方式二-通过springboot的配置类实现">方式二 通过SpringBoot的配置类实现</span></h3><h4><span id="1-创建myservlet">1、创建MyServlet</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123; <br><br>        resp.getWriter().print(<span class="hljs-string">&quot;Hello,SpringBoot Servlet!&quot;</span>); <br>        resp.getWriter().flush(); <br>        resp.getWriter().close(); <br><br>    &#125; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123; <br>        doGet(req,resp); <br>    &#125; <br>&#125; <br></code></pre></div></td></tr></table></figure>

<p>这里就不需要写注解了</p>
<h4><span id="2-springboot的配置类中注册servlet">2、SpringBoot的配置类中注册Servlet</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span>  <span class="hljs-comment">//将此类作为配置类 </span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ServletConfig</span> </span>&#123; <br><br>    <span class="hljs-comment">//@Bean是一个方法级别上的注解，主要用在配置类里 </span><br>    <span class="hljs-comment">/* </span><br><span class="hljs-comment">     * 相当于一个&lt;beans&gt; </span><br><span class="hljs-comment">     *               &lt;bean id=&quot;&quot; class=&quot;&quot;/&gt; </span><br><span class="hljs-comment">     *         &lt;/beans&gt; </span><br><span class="hljs-comment">     * */</span> <br><br>    <span class="hljs-meta">@Bean</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title">myServletRegistrationBean</span><span class="hljs-params">()</span> </span>&#123; <br>        <span class="hljs-comment">//将自定义servlet注册到注册Servlet类中，并指定访问路径 </span><br>        ServletRegistrationBean servletRegistrationBean = <span class="hljs-keyword">new</span> ServletRegistrationBean(<span class="hljs-keyword">new</span> MyServlet(), <span class="hljs-string">&quot;/springboot/myServlet&quot;</span>); <br><br>        <span class="hljs-keyword">return</span> servletRegistrationBean; <br>    &#125; <br>&#125; <br></code></pre></div></td></tr></table></figure>



<h4><span id="3-运行测试">3、运行测试</span></h4><p>正常</p>
<h2><span id="第7章-springboot中使用filter了解">第7章 SpringBoot中使用Filter（了解）</span></h2><h3><span id="方式一注解方式">方式一：注解方式</span></h3><h4><span id="1-通过注解方式创建一个filter">1、通过注解方式创建一个Filter</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@WebFilter(urlPatterns = &quot;/springboot/myFilter&quot;)</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span></span><br><span class="hljs-function"></span><br><span class="hljs-function">        <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123; <br>        System.out.println(<span class="hljs-string">&quot;-------------您已进入过滤器---------------&quot;</span>); <br><br>        filterChain.doFilter(servletRequest,servletResponse); <br><br>    &#125; <br><br>&#125; <br></code></pre></div></td></tr></table></figure>

<p>从以前的学习中了解到，Filter就是个Servlet，所以很明显，<font color="red">在SpringBoot中，Filter的使用和Servlet的基本一样的</font>。</p>
<p>不一样的是，这里urlPatterns需要写过滤路径，可以使用通配符。</p>
<h4><span id="2-application上加上注解servletcomponentscan">2、application上加上注解@ServletComponentScan</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@ServletComponentScan(basePackages = &quot;com.abc.springboot.filter&quot;)</span> <br><span class="hljs-meta">@SpringBootApplication</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123; <br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123; <br>        SpringApplication.run(Application.class, args); <br>    &#125; <br><br>&#125; <br></code></pre></div></td></tr></table></figure>

<p>仍然和servlet一样</p>
<h4><span id="3-运行测试">3、运行测试</span></h4><p>正常</p>
<h3><span id="方式二springboot配置类方式">方式二：SpringBoot配置类方式</span></h3><h4><span id="1-新建myfilter">1、新建MyFilter</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, </span></span><br><span class="hljs-params"><span class="hljs-function">                         FilterChain filterChain)</span></span><br><span class="hljs-function"></span><br><span class="hljs-function">        <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123; <br>        System.out.println(<span class="hljs-string">&quot;-------------通过配置类注册过滤器---------------&quot;</span>); <br>        filterChain.doFilter(servletRequest,servletResponse); <br><br>    &#125; <br><br>&#125; <br></code></pre></div></td></tr></table></figure>



<h4><span id="2-编写配置类注册filter">2、 编写配置类，注册Filter</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">//定义为配置类 </span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FilterConfig</span> </span>&#123; <br><br>    <span class="hljs-meta">@Bean</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> FilterRegistrationBean <span class="hljs-title">myFilterRegistration</span><span class="hljs-params">()</span> </span>&#123; <br><br>        <span class="hljs-comment">//注册过滤器 </span><br>        FilterRegistrationBean filterRegistrationBean = <span class="hljs-keyword">new</span> FilterRegistrationBean(<span class="hljs-keyword">new</span> MyFilter()); <br><br>        <span class="hljs-comment">//添加过滤路径</span><br>        filterRegistrationBean.addUrlPatterns(<span class="hljs-string">&quot;/springboot/*&quot;</span>,<span class="hljs-string">&quot;/user/*&quot;</span>); <br><br>        <span class="hljs-keyword">return</span> filterRegistrationBean; <br><br>    &#125; <br><br>&#125; <br></code></pre></div></td></tr></table></figure>

<p>这里和Servlet稍有不同，需要注意。</p>
<h2><span id="第8章-springboot项目配置字符编码">第8章 SpringBoot项目配置字符编码</span></h2><h4><span id="创建一个servlet">创建一个Servlet</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> </span><br><span class="hljs-function">        ServletException, IOException </span>&#123; <br>        resp.getWriter().print(<span class="hljs-string">&quot;Hello World，世界您好！&quot;</span>); <br>        <span class="hljs-comment">//设置浏览器编码格式 </span><br>        resp.setContentType(<span class="hljs-string">&quot;text/html;character=utf-8&quot;</span>); <br>        resp.getWriter().flush(); <br>        resp.getWriter().close(); <br>    &#125; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> </span><br><span class="hljs-function">        <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123; <br>        doGet(req, resp); <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><font color="red">在 servlet 中添加 response.setContextType(“text/html;charset=utf-8”)指定浏览器编码方式 </font></p>
<h4><span id="创建配置类-systemconfig">创建配置类 SystemConfig</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span>  <span class="hljs-comment">//设置为配置类 </span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SystemConfig</span> </span>&#123; <br><br>    <span class="hljs-meta">@Bean</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title">myServletRegistration</span><span class="hljs-params">()</span> </span>&#123; <br><br>        ServletRegistrationBean servletRegistrationBean = <span class="hljs-keyword">new</span> ServletRegistrationBean(<span class="hljs-keyword">new</span> MyServlet(), <span class="hljs-string">&quot;/springboot/myServlet&quot;</span>); <br><br>        <span class="hljs-keyword">return</span> servletRegistrationBean; <br>    &#125; <br><br>    <span class="hljs-meta">@Bean</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> FilterRegistrationBean <span class="hljs-title">characterFilterRegistration</span><span class="hljs-params">()</span> </span>&#123; <br><br>        <span class="hljs-comment">//设置字符编码过滤器 </span><br>        <span class="hljs-comment">//CharacterEncoding是由Spring提供的一个字符编码过滤器，之前是配置在</span><br>web.xml文件中 <br>            CharacterEncodingFilter characterEncodingFilter = <span class="hljs-keyword">new</span> <br>            CharacterEncodingFilter(); <br>        <span class="hljs-comment">//强制使用指定字符编码 </span><br>        characterEncodingFilter.setForceEncoding(<span class="hljs-keyword">true</span>); <br>        <span class="hljs-comment">//设置指定字符编码 </span><br>        characterEncodingFilter.setEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>); <br><br>        <span class="hljs-comment">//创建过滤器注册bean </span><br>        FilterRegistrationBean filterRegistrationBean = <span class="hljs-keyword">new</span> <br>            FilterRegistrationBean(); <br>        <span class="hljs-comment">//设置字符编码过滤器 </span><br>        filterRegistrationBean.setFilter(characterEncodingFilter); <br>        <span class="hljs-comment">//设置字符编码过滤器路径 </span><br>        filterRegistrationBean.addUrlPatterns(<span class="hljs-string">&quot;/*&quot;</span>); <br><br>        <span class="hljs-keyword">return</span> filterRegistrationBean; <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="关闭-springboot-的-http-字符编码支持">关闭 SpringBoot 的 http 字符编码支持</span></h4><figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#关闭springboot的http字符编码支持 </span><br><span class="hljs-comment">#只有关闭该选项后，spring字符编码过滤器才生效 </span><br><span class="hljs-meta">spring.http.encoding.enabled</span>=<span class="hljs-string">false </span><br></code></pre></div></td></tr></table></figure>



<h3><span id="方法二在-applicationproperties-中配置字符编码推荐">方法二：在 application.properties 中配置字符编码（推荐）</span></h3><figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#设置请求响应的字符编码 </span><br><span class="hljs-meta">spring.http.encoding.enabled</span>=<span class="hljs-string">true </span><br><span class="hljs-meta">spring.http.encoding.force</span>=<span class="hljs-string">true </span><br><span class="hljs-meta">spring.http.encoding.charset</span>=<span class="hljs-string">UTF-8 </span><br></code></pre></div></td></tr></table></figure>



<h4><span id="创建-servlet">创建 Servlet</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> </span><br><span class="hljs-function">        ServletException, IOException </span>&#123; <br>        resp.getWriter().print(<span class="hljs-string">&quot;Hello World!世界您真好！&quot;</span>); <br>        resp.setContentType(<span class="hljs-string">&quot;text/html;character=utf-8&quot;</span>); <br>        resp.getWriter().flush(); <br>        resp.getWriter().close(); <br>    &#125; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123; <br>        doGet(req, resp); <br>    &#125; <br>&#125; <br></code></pre></div></td></tr></table></figure>



<h4><span id="创建配置类-servletconfig">创建配置类 ServletConfig</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ServletConfig</span> </span>&#123; <br><br>    <span class="hljs-meta">@Bean</span> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title">myServletRegistration</span><span class="hljs-params">()</span> </span>&#123; <br>        ServletRegistrationBean servletRegistrationBean = <span class="hljs-keyword">new</span> ServletRegistrationBean(<span class="hljs-keyword">new</span> MyServlet(),<span class="hljs-string">&quot;/myservlet&quot;</span>); <br>        <span class="hljs-keyword">return</span> servletRegistrationBean; <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h2><span id="第9章-springboot打包与部署">第9章 SpringBoot打包与部署</span></h2><h3><span id="spring-boot程序打-war-包">Spring Boot程序打 war 包</span></h3><p>程序入口类需扩展继承 SpringBootServletInitializer 类并覆盖 configure 方法</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SpringBootServletInitializer</span> </span>&#123; <br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123; <br>        SpringApplication.run(Application.class, args); <br>    &#125; <br><br>    <span class="hljs-meta">@Override</span> <br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> SpringApplicationBuilder <span class="hljs-title">configure</span><span class="hljs-params">(SpringApplicationBuilder builder)</span> </span>&#123; <br>        <span class="hljs-comment">//参数为当前SpringBoot启动类 </span><br>        <span class="hljs-keyword">return</span> builder.sources(Application.class); <br>    &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>在 pom.xml 中添加（修改）打包方式为 war</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>war<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>在 pom.xml 中配置将配置文件编译到类路径</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--jsp编译位置--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/webapp<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">targetPath</span>&gt;</span>META-INF/resources<span class="hljs-tag">&lt;/<span class="hljs-name">targetPath</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.*<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--mybatis的mapper.xml--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--src/main/resources下的所有配置文件编译到classes下面去--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.*<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p>在 pom.xml 的 build 标签下通过 finalName 指定打 war包的名字</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">finalName</span>&gt;</span>springboot<span class="hljs-tag">&lt;/<span class="hljs-name">finalName</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p><font color="red">特别注意：如果外部tomcat和内部tomcat的版本不一致，一定要指定tomcat版本。</font></p>
<p>在properties中，添加下面语句。</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">tomcat.version</span>&gt;</span>8.0.50<span class="hljs-tag">&lt;/<span class="hljs-name">tomcat.version</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>通过 Maven package 命令打 war 包到 target 目录下</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110260048550.png" srcset="/img/loading.gif" lazyload alt="image-20211026004840458"></p>
<p><font color="red">注意，使用外部的tomcat，部署war包时，一定要加包名</font>。</p>
<h3><span id="spring-boot-程序打-jar-包与运行">Spring Boot 程序打 Jar 包与运行</span></h3><p>因为 SpringBoot 默认打包方式就是jar 包,所以我们直接执行 Maven 的 package 命令就行了</p>
<p>修改 pom.xml 文件中打包插件的版本</p>
<p>默认 SpingBoot 提供的打包插件版本为 2.2.2.RELEASE，这个版本打的 jar 包 jsp 不能访问，</p>
<p><font color="red">我们这里修改为 1.4.2.RELEASE（其它版本测试都有问题）</font></p>
<p><font color="red">非常关键！</font></p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- SpringBoot提供打包编译插件 --&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.2.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p>将 target 下的 jar 包拷贝到某一个目录，在该目录下执行 java -jar jar 包名称</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110260050835.png" srcset="/img/loading.gif" lazyload alt="image-20211026005027794"></p>
<h3><span id="打包与部署总结">打包与部署总结</span></h3><p>➢ 在 IDEA 中直接运行 Spring Boot 程序的main 方法（开发阶段）<br>➢ 用 maven 将Spring Boot 安装为一个jar 包，使用 Java 命令运行<br>java -jar springboot-xxx.jar<br>可以将该命令封装到一个 Linux 的一个 shell 脚本中（上线部署）<br>◼ 写一个 shell 脚本(run.sh)：<br>    #!/bin/sh<br>    java -jar xxx.jar </p>
<p>◼ 赋权限 chmod 777 run.sh </p>
<p>◼ 启动 shell 脚本： ./run.sh </p>
<h2><span id="第10章-springboot-集成-logback-日志">第10章 SpringBoot 集成 logback 日志</span></h2><p>Spring Boot 官方推荐优先使用带有 -spring 的文件名作为你的日志配置（如使用 logback-spring.xml ，而不是 logback.xml），命名为<font color="red"> logback-spring.xml </font>的日志配置文件。 默认的命名规则，并且放在<font color="red"> src/main/resources</font> 下。</p>
<p>如果你即想完全掌控日志配置，但又不想用 logback.xml 作为Logback 配置的名字，application.yml 可以通过 logging.config 属性指定自定义的名字： </p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-meta">logging.config</span>=<span class="hljs-string">classpath:logging-config.xml</span><br></code></pre></div></td></tr></table></figure>



<p>我们一般针对 DAO 的包进行 DEBUG 日志设置（先不看）：</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.abc.springboot.mapper&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;DEBUG&quot;</span> /&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>这样的话，只打印 SQL 语句： </p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110260054801.png" srcset="/img/loading.gif" lazyload alt="image-20211026005435762"></p>
<p>代码里打印日志</p>
<p>之前我们大多数时候自己在<font color="red">每个类创建日志对象去打印信息</font>，比较麻烦：<br>private static final Logger logger = LoggerFactory.getLogger(StudentServiceImpl.class);<br>logger.error(“xxx”);<br>现在可以直接在类上通过<font color="red"> @Slf4j </font>标签去声明式注解日志对象 </p>
<p>在 pom.xml 中添加依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--@Slf4j自动化日志对象--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>添加 lombok 插件<img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110260055138.png" srcset="/img/loading.gif" lazyload alt="image-20211026005518065"></p>
<p><font color="red">注意：新版idea已经自带lombok插件。</font></p>
<p>logback-spring.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span> <br><span class="hljs-comment">&lt;!-- 日志级别从低到高分为TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL，如果</span><br><span class="hljs-comment">设置为WARN，则低于WARN的信息都不会输出 --&gt;</span> <br><span class="hljs-comment">&lt;!-- scan:当此属性设置为true时，配置文件如果发生改变，将会被重新加载，默认值为</span><br><span class="hljs-comment">true --&gt;</span><br><span class="hljs-comment">&lt;!-- scanPeriod:设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认</span><br><span class="hljs-comment">单位是毫秒。当scan为true时，此属性生效。默认的时间间隔为1分钟。 --&gt;</span> <br><span class="hljs-comment">&lt;!-- de<span class="hljs-doctag">bug:</span>当此属性设置为true时，将打印出logback内部日志信息，实时查看logback</span><br><span class="hljs-comment">运行状态。默认值为false。通常不打印 --&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>  <span class="hljs-attr">scan</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">scanPeriod</span>=<span class="hljs-string">&quot;10 seconds&quot;</span>&gt;</span> <br><br>    <span class="hljs-comment">&lt;!--输出到控制台--&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;CONSOLE&quot;</span> </span><br><span class="hljs-tag">              <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span> <br>        <span class="hljs-comment">&lt;!--此日志appender是为开发使用，只配置最底级别，控制台输出的日志级别是大</span><br><span class="hljs-comment">于或等于此级别的日志信息--&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">level</span>&gt;</span>debug<span class="hljs-tag">&lt;/<span class="hljs-name">level</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">Pattern</span>&gt;</span>%date [%-5p] [%thread] %logger&#123;60&#125; <br>                [%file : %line] %msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">Pattern</span>&gt;</span> <br>            <span class="hljs-comment">&lt;!-- 设置字符集 --&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">charset</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">charset</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span> <br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;FILE&quot;</span> </span><br><span class="hljs-tag">              <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span> <br>        <span class="hljs-comment">&lt;!--&lt;File&gt;/home/log/stdout.log&lt;/File&gt;--&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">File</span>&gt;</span>D:/log/stdout.log<span class="hljs-tag">&lt;/<span class="hljs-name">File</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>%date [%-5p] %thread %logger&#123;60&#125; <br>                [%file : %line] %msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">rollingPolicy</span> </span><br><span class="hljs-tag">                       <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span> <br>            <span class="hljs-comment">&lt;!-- 添加.gz 历史日志会启用压缩 大大缩小日志文件所占空间 --&gt;</span> <br><br>            <span class="hljs-comment">&lt;!--&lt;fileNamePattern&gt;/home/log/stdout.log.%d&#123;yyyy-MM-dd&#125;.log&lt;/fileNam</span><br><span class="hljs-comment">ePattern&gt;--&gt;</span> <br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">fileNamePattern</span>&gt;</span>D:/log/stdout.log.%d&#123;yyyy-MM-dd&#125;.log&lt;/fileNamePatter<br>                n&gt; <br>            <span class="hljs-tag">&lt;<span class="hljs-name">maxHistory</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">maxHistory</span>&gt;</span><span class="hljs-comment">&lt;!--  保留30天日志 --&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">rollingPolicy</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span> <br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.abc.springboot.mapper&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;DEBUG&quot;</span> /&gt;</span> <br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;INFO&quot;</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;CONSOLE&quot;</span>/&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;FILE&quot;</span>/&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p>日志级别：TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL，设置之后，会输出级别大于等于该级别的日志。</p>
<ul>
<li>  <code>&lt;root level=&quot;INFO&quot;&gt; </code>，主要看这个。</li>
<li>  <code>&lt;level&gt;debug&lt;/level&gt;</code>，如果说小的设置了更高的级别，那就响应大于等于该级别的。</li>
</ul>
<p>做个Controller</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot.web;<br><br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;<br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogController</span> </span>&#123;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/test&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-meta">@ResponseBody</span> <span class="hljs-function">String <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>        log.trace(<span class="hljs-string">&quot;查询当前学生人数&quot;</span>);<br>        log.debug(<span class="hljs-string">&quot;查询当前学生人数&quot;</span>);<br>        log.info(<span class="hljs-string">&quot;查询当前学生人数&quot;</span>);<br>        log.warn(<span class="hljs-string">&quot;查询当前学生人数&quot;</span>);<br>        log.error(<span class="hljs-string">&quot;查询当前学生人数&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;10&quot;</span>;<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>



<p>启动测试</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271123050.png" srcset="/img/loading.gif" lazyload alt="image-20211027112252925"></p>
<h2><span id="第11章-springboot-集成-thymeleaf-模板">第11章 SpringBoot 集成 Thymeleaf 模板</span></h2><h3><span id="认识thymeleaf">认识ThymeLeaf</span></h3><p>Thymeleaf 是一个流行的模板引擎，该模板引擎采用 Java 语言开发。</p>
<p>模板引擎是一个技术名词，是跨领域跨平台的概念，在 Java 语言体系下有模板引擎，在 C#、PHP 语言体系下也有模板引擎，甚至在 JavaScript 中也会用到模板引擎技术，Java 生态下的模板引擎有 Thymeleaf 、Freemaker、Velocity、Beetl（国产） 等。 </p>
<p>Thymeleaf 对网络环境不存在严格的要求，既能用于 Web 环境下，也能用于非 Web 环<br>境下。在非Web 环境下，他能直接显示模板上的静态数据；在 Web 环境下，它能像 Jsp 一<br>样从后台接收数据并替换掉模板上的静态数据。它是基于 HTML 的，以 HTML 标签为载体，Thymeleaf 要寄托在 HTML 标签下实现。 </p>
<p>SpringBoot 集成了 Thymeleaf 模板技术，并且 Spring Boot 官方也推荐使用 Thymeleaf 来替代 JSP 技术，Thymeleaf 是另外的一种模板技术，它本身并不属于 Spring Boot，Spring Boot。</p>
<p>只是很好地集成这种模板技术，作为前端页面的数据展示，在过去的 Java Web 开发中，我<br>们往往会选择使用 Jsp 去完成页面的动态渲染，但是 jsp 需要翻译编译运行，效率低。</p>
<p>Thymeleaf 的官方网站：<a target="_blank" rel="noopener" href="http://www.thymeleaf.org/">http://www.thymeleaf.org</a><br>Thymeleaf 官方手册：<a target="_blank" rel="noopener" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html</a></p>
<h3><span id="spring-boot-集成-thymeleaf">Spring Boot 集成 Thymeleaf</span></h3><h4><span id="1-创建工程">1、创建工程</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271131098.png" srcset="/img/loading.gif" lazyload alt="image-20211027113103859"></p>
<p>按照这种方式创建后，pom.xml 文件下会自动添加如下依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--SpringBoot集成Thymeleaf的起步依赖--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span> <br> <br><span class="hljs-comment">&lt;!--SpringBoot开发web项目的起步依赖--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="2-springboot配置文件">2、springboot配置文件</span></h4><p>在Spring boot的核心配置文件application.properties 中对Thymeleaf 进行配置</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#thymeleaf页面的缓存开关，默认true开启缓存 </span><br><span class="hljs-comment">#建议在开发阶段关闭thymeleaf页面缓存，目的实时看到页面 </span><br><span class="hljs-meta">spring.thymeleaf.cache</span>=<span class="hljs-string">false</span><br></code></pre></div></td></tr></table></figure>

<p>下面的这个其实什么都不用配置就可以工作，因为基本 Thymeleaf 的配置都有默认值</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#thymeleaf模版前缀,默认可以不写</span><br><span class="hljs-meta">spring.thymeleaf.prefix</span>=<span class="hljs-string">classpath:/templates/ </span><br><span class="hljs-comment"></span><br><span class="hljs-comment">#thymeleaf模版后缀,默认可以不写 </span><br><span class="hljs-meta">spring.thymeleaf.suffix</span>=<span class="hljs-string">.html</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="3-写controller">3、写Controller</span></h4><p>创建 ThymeleafController 去映射到模板页面（和 SpringMVC 基本一致）</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wangpeng.springboot.web;<br><br><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.ModelAndView;<br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyController</span> </span>&#123;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;test&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>        ModelAndView mv = <span class="hljs-keyword">new</span> ModelAndView();<br>        mv.addObject(<span class="hljs-string">&quot;data&quot;</span>, <span class="hljs-string">&quot;你好 thymeleaf&quot;</span>);<br>        mv.setViewName(<span class="hljs-string">&quot;index&quot;</span>);<br>        <span class="hljs-keyword">return</span> mv;<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>



<h4><span id="4-写thymeleaf的html">4、写thymeleaf的html</span></h4><p>在 src/main/resources 的 templates 下新建一个 index.html 页<br>面用于展示数据</p>
<p>HTML 页面的<code>&lt;html&gt;</code>元素中加入以下属性：</p>
<p><font color="red"><code>&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</code></font></p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;data&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>th:text获取的数据是存放到标签体中的。</p>
<p><font color="purple">注意：Springboot 使用 thymeleaf 作为视图展示，约定将模板文件放置在src/main/resource/templates 目录下，静态资源放置在src/main/resource/static 目录下 </font></p>
<h4><span id="5-运行测试">5、运行测试</span></h4><p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271148117.png" srcset="/img/loading.gif" lazyload alt="image-20211027114812027"></p>
<h3><span id="thymeleaf表达式">Thymeleaf表达式</span></h3><p>创建实体 User 实体类</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Data</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123; <br> <br>    <span class="hljs-keyword">private</span> Integer id; <br> <br>    <span class="hljs-keyword">private</span> String name; <br> <br>    <span class="hljs-keyword">private</span> String phone; <br> <br>    <span class="hljs-keyword">private</span> String address; <br> <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>Data注解是lombok插件带的注解，使用它注意还需要添加lombok的依赖。</p>
<p>一般来说，不推荐使用lombok。</p>
<h4><span id="标准变量表达式">标准变量表达式</span></h4><p><font color="purple">注意：th:text=”” 是 Thymeleaf 的一个属性，用于文本的显示</font></p>
<p>语法 ${…}</p>
<p>标准变量表达式用于访问容器（tomcat）上下文环境中的变量，功能和 EL 中的 <code>$&#123;&#125;</code> 相<br>同。Thymeleaf 中的变量表达式使用 <code>$&#123;变量名&#125;</code> 的方式获取 Controller 中 model 其中的数据</p>
<p>演示</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html">用户编号：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.id&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>用户姓名：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>用户手机号：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.phone&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>用户地址：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.address&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="选择变量表达式了解不推荐使用">选择变量表达式（了解，不推荐使用）</span></h4><p>选择变量表达式，也叫星号变量表达式，使用 th:object </p>
<p>属性来绑定对象<br>选择表达式首先使用th:object 来绑定后台传来的 User 对象，然后使用 * 来代表这个对<br>象，后面 {} 中的值是此对象中的属性。<br>选择变量表达式 *{…} 是另一种类似于标准变量表达式 <code>$&#123;...&#125;</code> 表示变量的方法<br>选择变量表达式在执行时是在选择的对象上求解，而<code>$&#123;...&#125;</code>是在上下文的变量Model 上求解，这种写法比标准变量表达式繁琐，只需要大家了解即可 </p>
<p>演示</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>展示User用户信息（星号表达式,仅在div范围内有效）：<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:object</span>=<span class="hljs-string">&quot;$&#123;user&#125;&quot;</span>&gt;</span> <br>    用户编号：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*&#123;id&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>    用户姓名：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*&#123;name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>    用户手机号：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*&#123;phone&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>    用户地址：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*&#123;address&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>=======选择变量表达式=======<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span> <br>用户编号：*&#123;user.id&#125; ==&gt; <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*&#123;user.id&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>用户姓名：*｛user.name｝ ==&gt; <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*&#123;user.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>用户手机号：*&#123;user.phone&#125; ==&gt; <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*&#123;user.phone&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>用户地址：*&#123;user.address&#125; ==&gt; <span class="hljs-tag">&lt;<span class="hljs-name">span</span> </span><br><span class="hljs-tag"><span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*&#123;user.address&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="url表达式">URL表达式</span></h4><p>语法@{…}</p>
<p>说明</p>
<p>主要用于链接、地址的展示，可用于<br><code>&lt;script src=&quot;...&quot;&gt;、&lt;link href=&quot;...&quot;&gt;、&lt;a href=&quot;...&quot;&gt;、&lt;form action=&quot;...&quot;&gt;、&lt;img src=&quot;&quot;&gt;</code>等，可以在 URL 路径中动态获取数据 </p>
<p>演示</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>URL路径表达式 -&gt; @&#123;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>URL路径表达式：@&#123;...&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>绝对路径（没有参数）<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;http://localhost:8080/thymeleaf/info&#125;&quot;</span>&gt;</span>查看：绝对路径<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> <br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>绝对路径（路径中有参数）<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;http://localhost:8080/thymeleaf/user/info?id=&#x27; + </span></span><br><span class="hljs-string"><span class="hljs-tag">                    $&#123;user.id&#125;&#125;&quot;</span>&gt;</span>查看用户信息：绝对路径(带参数)<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> <br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red&quot;</span>&gt;</span>实际开发推荐使用：相对路径（没有参数）<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/thymeleaf/info&#125;&quot;</span>&gt;</span>查看：相对路径<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> <br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red&quot;</span>&gt;</span>实际开发推荐使用：相对路径（路径中有参数）<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/thymeleaf/user/info?id=&#x27; + $&#123;user.id&#125;&#125;&quot;</span>&gt;</span>查看用户信息：相<br>            对路径（带参数）<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/thymeleaf/info(id=$&#123;user.id&#125;)&#125;&quot;</span>&gt;</span>推荐使用：优雅的带参数路径<br>            写法<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>为了演示加上下文的效果，在 application.properties 中配置项目上下文</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/url-expression</span><br></code></pre></div></td></tr></table></figure>

<p>在 ThymeleafController 中添加如下方法：</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/thymeleaf/url&quot;)</span> <br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">url</span><span class="hljs-params">(Model model)</span> </span>&#123; <br>    User user = <span class="hljs-keyword">new</span> User(); <br>    user.setId(<span class="hljs-number">2</span>); <br>    user.setName(<span class="hljs-string">&quot;赵六&quot;</span>); <br>    user.setPhone(<span class="hljs-string">&quot;13800000000&quot;</span>); <br>    user.setAddress(<span class="hljs-string">&quot;上海市&quot;</span>); <br><br>    model.addAttribute(<span class="hljs-string">&quot;user&quot;</span>,user); <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;url&quot;</span>; <br>&#125; <br><br><span class="hljs-meta">@RequestMapping(value = &quot;/thymeleaf/info&quot;)</span> <br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">info</span><span class="hljs-params">(Integer id)</span> </span>&#123; <br>    System.out.println(<span class="hljs-string">&quot;用户编号：&quot;</span> + id); <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;info&quot;</span>; <br>&#125; <br></code></pre></div></td></tr></table></figure>

<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271355138.png" srcset="/img/loading.gif" lazyload alt="image-20211027135535064"></p>
<p>主要关注下面两种用法就可以了</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/thymeleaf/user/info?id=&#x27; + $&#123;user.id&#125;&#125;&quot;</span>&gt;</span>查看用户信息：相<br>    对路径（带参数）<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/thymeleaf/info(id=$&#123;user.id&#125;)&#125;&quot;</span>&gt;</span>推荐使用：优雅的带参数路径<br>    写法<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h3><span id="thymeleaf-的常见属性">Thymeleaf 的常见属性</span></h3><h4><span id="thaction">th:action</span></h4><p>th:action 定义后台控制器的路径，类似<form>标签的 action 属性，主要结合 URL 表达式,获取动态变量</form></p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@&#123;&#x27;/user/login?id=&#x27;+$&#123;user.id&#125;&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>我们请求的流程是，发送请求给服务器，服务器接收请求后，处理请求，跳转到指定的静态 html 页面，在服务器端，Thymeleaf 模板引擎会按照它的语法，对动态数据进行处理，所以如果要是 th 开头，模板引擎能够识别，会在服务器端进行处理，获取数据；如果没有以 th 开头，那么 Thymeleaf 模板引擎不会处理，直接返回给客户端了。 </p>
<h4><span id="thmethod">th:method</span></h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@&#123;/user/login&#125;&quot;</span> <span class="hljs-attr">th:method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="thhref">th:href</span></h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;&#x27;http://www.baidu.com?id=&#x27; + $&#123;user.id&#125;&quot;</span>&gt;</span>th:href链接<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="thsrc">th:src</span></h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/jquery-1.7.2.min.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="thid">th:id</span></h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:id</span>=<span class="hljs-string">&quot;$&#123;hello&#125;&quot;</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="thname">th:name</span></h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">th:type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">th:id</span>=<span class="hljs-string">&quot;userName&quot;</span> <span class="hljs-attr">th:name</span>=<span class="hljs-string">&quot;userName&quot;</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="thvalue">th:value</span></h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userId&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userId&quot;</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">&quot;$&#123;userId&#125;&quot;</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="thattr">th:attr</span></h4><p>该属性也是用于给 HTML 中某元素的某属性赋值，好处是可以给 html 中没有定义的属性动态的赋值。</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>th:attr属性的使用<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">zhangsan</span>=<span class="hljs-string">&quot;$&#123;user.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br><span class="hljs-comment">&lt;!--通过th:attr对自定义的属性赋值--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:attr</span>=<span class="hljs-string">&quot;zhangsan=$&#123;user.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271416371.png" srcset="/img/loading.gif" lazyload alt="image-20211027141629310"></p>
<h4><span id="thtext">th:text</span></h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html">用于文本的显示，该属性显示的文本在标签体中，如果是文本框，数据会在文本框外显示，<br>要想显示在文本框内，使用 th:value <br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;realName&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;reaName&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;realName&#125;&quot;</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="thobject">th:object</span></h4><p>用于数据对象绑定<br>通常用于选择变量表达式（星号表达式）</p>
<h4><span id="thonclick">th:onclick</span></h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>th:onclick的使用<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br><span class="hljs-comment">&lt;!--目前thymeleaf版本要求只能传递数字和布尔值--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:onclick</span>=<span class="hljs-string">&quot;&#x27;show(&#x27;+$&#123;user.id&#125;+&#x27;)&#x27;&quot;</span>&gt;</span>点击：显示学生编号<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"> </span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span>(<span class="hljs-params">id</span>) </span>&#123; </span><br><span class="javascript">        alert(<span class="hljs-string">&quot;用户编号为：&quot;</span> + id); </span><br><span class="javascript">    &#125; </span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="thstyle">th:style</span></h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:onclick</span>=<span class="hljs-string">&quot;&#x27;show(&#x27;+$&#123;user.id&#125;+&#x27;)&#x27;&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">th:style</span>=<span class="hljs-string">&quot;&#x27;font-size:40px;color:red;&#x27;&quot;</span>&gt;</span>点击：显示学生编号<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h4><span id="theach"><font color="red">*th:each</font></span></h4><p>这个属性非常常用，比如从后台传来一个对象集合那么就可以使用此属性遍历输出，它与<br>JSTL 中的&lt;c: forEach&gt;类似，此属性既可以循环遍历集合，也可以循环遍历数组及Map</p>
<h5><span id="遍历-list-集合">遍历 List 集合</span></h5><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyController</span> </span>&#123;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;test&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>        ModelAndView mv = <span class="hljs-keyword">new</span> ModelAndView();<br>        List&lt;Student&gt; students = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>            Student student = <span class="hljs-keyword">new</span> Student();<br>            student.setId(i);<br>            student.setName(<span class="hljs-string">&quot;张&quot;</span> + i);<br>            student.setAge(<span class="hljs-number">20</span> + i);<br>            students.add(student);<br>        &#125;<br><br>        mv.addObject(<span class="hljs-string">&quot;studentList&quot;</span>, students);<br>        mv.setViewName(<span class="hljs-string">&quot;index&quot;</span>);<br>        <span class="hljs-keyword">return</span> mv;<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>html</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;student,studentStat:$&#123;studentList&#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;studentStat.index&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;student.id&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;student.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;student.age&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p><code>th:each=&quot;user, iterStat : $&#123;userlist&#125;&quot;</code>中的 ${userList} 是后台传过来的集合</p>
<p>user<br>定义变量，去接收遍历${userList}集合中的一个数据 </p>
<p>iterStat </p>
<p>${userList} 循环体的信息 </p>
<p>其中user 及iterStat 自己可以随便取名</p>
<p>interStat 是循环体的信息，通过该变量可以获取如下信息</p>
<p>index: 当前迭代对象的 index（从 0 开始计算）</p>
<p>count: 当前迭代对象的个数（从 1 开始计算）这两个用的较多 </p>
<p>size: 被迭代对象的大小 </p>
<p>current: 当前迭代变量 </p>
<p>even/odd: 布尔值，当前循环是否是偶数/奇数（从 0 开始计算） </p>
<p>first: 布尔值，当前循环是否是第一个 </p>
<p>last: 布尔值，当前循环是否是最后一个 </p>
<p>注意：<font color="red">循环体信息 interStat 也可以不定义，则默认采用迭代变量加上 Stat 后缀，即userStat</font></p>
<p>效果</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271801002.png" srcset="/img/loading.gif" lazyload alt="image-20211027180138929"></p>
<h5><span id="遍历-map-集合">遍历 Map 集合</span></h5><p>在 ThymeleafController 中添加 eachMap 方法</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/each/map&quot;)</span> <br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">eachMap</span><span class="hljs-params">(Model model)</span> </span>&#123; <br><br>    Map&lt;Integer,Object&gt; userMaps = <span class="hljs-keyword">new</span> HashMap&lt;Integer, Object&gt;(); <br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123; <br>        User user = <span class="hljs-keyword">new</span> User(); <br>        user.setId(i); <br>        user.setName(<span class="hljs-string">&quot;李四&quot;</span>+i); <br>        user.setPhone(<span class="hljs-string">&quot;1390000000&quot;</span>+i); <br>        user.setAddress(<span class="hljs-string">&quot;天津市&quot;</span>+i); <br><br>        userMaps.put(i,user); <br>    &#125; <br><br>    model.addAttribute(<span class="hljs-string">&quot;userMaps&quot;</span>,userMaps); <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;eachMap&quot;</span>; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p> 添加 eachMap.html 页面对 Map 集合进行遍历</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>循环遍历Map集合<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>th:each循环遍历Map集合<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;userMap,userMapStat:$&#123;userMaps&#125;&quot;</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;userMapStat.count&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;userMap.key&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;userMap.value&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;userMap.value.id&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;userMap.value.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;userMap.value.phone&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;userMap.value.address&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p><code>th:each=&quot;userMap,userMapStat:$&#123;userMaps&#125;&quot; </code>，用 userMap 变量接收每次遍历的结果，封装为一个键值对，userMapStat 状态<br>userMap.key：获取当前键值对中的key<br>userMap.value：获取当前键值对中的 value </p>
<p>效果</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271805329.png" srcset="/img/loading.gif" lazyload alt="image-20211027180530250"></p>
<h5><span id="遍历-array-数组">遍历 Array 数组</span></h5><p>在 ThymeleafController 中的 eachArray 方法中准备数组数据</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/each/array&quot;)</span> <br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">eachArray</span><span class="hljs-params">(Model model)</span> </span>&#123; <br>    User[] userArray = <span class="hljs-keyword">new</span> User[<span class="hljs-number">10</span>]; <br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123; <br>        User user = <span class="hljs-keyword">new</span> User(); <br>        user.setId(i); <br>        user.setName(<span class="hljs-string">&quot;赵六&quot;</span>+i); <br>        user.setPhone(<span class="hljs-string">&quot;1380000000&quot;</span>+i); <br>        user.setAddress(<span class="hljs-string">&quot;深圳市&quot;</span>+i); <br>        userArray[i] = user; <br>    &#125; <br><br>    model.addAttribute(<span class="hljs-string">&quot;userArray&quot;</span>,userArray); <br><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;eachArray&quot;</span>; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>在 eachArray.html 页面对数组进行遍历（和 List 一样）</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>循环遍历Array数组<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;user,userStat:$&#123;userArray&#125;&quot;</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;userStat.count&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.id&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.phone&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.address&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p>效果<br><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271806877.png" srcset="/img/loading.gif" lazyload alt="image-20211027180649809"></p>
<h5><span id="比较复杂的循环案例">比较复杂的循环案例</span></h5><p>需求：List 里面放 Map，Map 里面又放的是 List</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271807754.png" srcset="/img/loading.gif" lazyload alt="image-20211027180713673"></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/each/all&quot;)</span> <br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">eachAll</span><span class="hljs-params">(Model model)</span> </span>&#123; <br><br>    <span class="hljs-comment">//list -&gt; Map -&gt; List -&gt; User </span><br>    List&lt;Map&lt;Integer,List&lt;User&gt;&gt;&gt; myList = <span class="hljs-keyword">new</span> ArrayList&lt;Map&lt;Integer, <br>    List&lt;User&gt;&gt;&gt;(); <br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span>; i++) &#123; <br><br>        Map&lt;Integer,List&lt;User&gt;&gt; myMap = <span class="hljs-keyword">new</span> HashMap&lt;Integer, <br>        List&lt;User&gt;&gt;(); <br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">2</span>; j++) &#123; <br><br>            List&lt;User&gt; myUserList = <span class="hljs-keyword">new</span> ArrayList&lt;User&gt;(); <br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">3</span>; k++) &#123; <br><br>                User user = <span class="hljs-keyword">new</span> User(); <br>                user.setId(k); <br>                user.setName(<span class="hljs-string">&quot;张三&quot;</span>+k); <br>                user.setPhone(<span class="hljs-string">&quot;1350000000&quot;</span>+k); <br>                user.setAddress(<span class="hljs-string">&quot;广州市&quot;</span>+i); <br><br>                myUserList.add(user); <br><br>            &#125; <br>            myMap.put(j,myUserList); <br><br>        &#125; <br>        myList.add(myMap); <br><br>    &#125; <br><br>    model.addAttribute(<span class="hljs-string">&quot;myList&quot;</span>,myList); <br><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;eachAll&quot;</span>; <br>&#125; <br></code></pre></div></td></tr></table></figure>

<p>在 eachAll.html 页面对复杂集合关系进行遍历</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>循环遍历复杂集合<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>循环遍历复杂集合:list -&gt; Map -&gt; List -&gt; User<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;myListMap:$&#123;myList&#125;&quot;</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;myListMapObj:$&#123;myListMap&#125;&quot;</span>&gt;</span> <br>                Map集合的key：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;myListMapObj.key&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;myListMapObjList:$&#123;myListMapObj.value&#125;&quot;</span>&gt;</span> <br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;myListMapObjList.id&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;myListMapObjList.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;myListMapObjList.phone&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;myListMapObjList.address&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p>不要慌，仍然是套娃，效果如下</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271809165.png" srcset="/img/loading.gif" lazyload alt="image-20211027180924074"></p>
<h3><span id="条件判断">条件判断</span></h3><h4><span id="thif-和-thunless">th:if 和 th:unless</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/condition&quot;)</span> <br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">condition</span><span class="hljs-params">(HttpServletRequest request,Model model)</span> </span>&#123; <br><br>    User user1 = <span class="hljs-keyword">null</span>; <br>    model.addAttribute(<span class="hljs-string">&quot;user1&quot;</span>,user1); <br><br>    User user2 = <span class="hljs-keyword">new</span> User(); <br>    user2.setId(<span class="hljs-number">1001</span>); <br><br>    user2.setName(<span class="hljs-string">&quot;小岳岳&quot;</span>); <br><br>    user2.setPhone(<span class="hljs-string">&quot;13900000000&quot;</span>); <br>    user2.setAddress(<span class="hljs-string">&quot;北京市&quot;</span>); <br><br>    model.addAttribute(<span class="hljs-string">&quot;user2&quot;</span>,user2); <br>    model.addAttribute(<span class="hljs-string">&quot;sex&quot;</span>,<span class="hljs-number">1</span>);<br>    <br>    User user3 = <span class="hljs-keyword">new</span> User(); <br>    user3.setId(<span class="hljs-number">1002</span>); <br>    user3.setName(<span class="hljs-string">&quot;孙悦&quot;</span>); <br>    user3.setPhone(<span class="hljs-string">&quot;13200000000&quot;</span>); <br>    user3.setAddress(<span class="hljs-string">&quot;北京市&quot;</span>); <br>    <br>    model.addAttribute(<span class="hljs-string">&quot;user3&quot;</span>,user3); <br>    request.getSession().setAttribute(<span class="hljs-string">&quot;user3&quot;</span>,user3); <br><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;condition&quot;</span>; <br>&#125; <br></code></pre></div></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>条件判断<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>th:if 用法:如果满足条件显示，否则相反<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;sex eq 1&#125;&quot;</span>&gt;</span> <br>            男：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">&quot;1&quot;</span>/&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;sex eq 0&#125;&quot;</span>&gt;</span> <br>            女：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">&quot;0&quot;</span>/&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>th:unless 用法：与th:if用法相反，即对条件判断条件取反<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:unless</span>=<span class="hljs-string">&quot;$&#123;sex == 1&#125;&quot;</span>&gt;</span> <br>            男：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">&quot;1&quot;</span>/&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:unless</span>=<span class="hljs-string">&quot;$&#123;sex eq 0&#125;&quot;</span>&gt;</span> <br>            女：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">&quot;0&quot;</span>/&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;user1 eq null&#125;&quot;</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red&quot;</span>&gt;</span>用户未登录<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:unless</span>=<span class="hljs-string">&quot;$&#123;user2 == null&#125;&quot;</span>&gt;</span> <br>            用户姓名：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user2.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>从session中获取值<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;user3 != null&#125;&quot;</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user3.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>



<h4><span id="thswitchthcase">th:switch/th:case</span></h4><p>switch，case 判断语句</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>th:switch/th:case 用法<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:switch</span>=<span class="hljs-string">&quot;$&#123;sex&#125;&quot;</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:case</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span>性别：男<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:case</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span>性别：女<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:case</span>=<span class="hljs-string">&quot;*&quot;</span>&gt;</span>性别：保密<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p><font color="purple">一旦某个 case 判断值为 true，剩余的 case 默认不执行，“*”表示默认的 case，前面的 case 都不匹配时候，执行默认的 case </font></p>
<p>效果</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271817297.png" srcset="/img/loading.gif" lazyload alt="image-20211027181704235"></p>
<h4><span id="thinline">th:inline</span></h4><p>th:inline 有三个取值类型 (text, javascript和 none)，值为none 什么都不做，没有效果</p>
<p>（1） 内敛文本（th:inline=”text”） </p>
<p>内敛文本表达式不依赖于 html 标签，直接使用内敛表达式[[表达式]]即可获取动态数据，但必须要求在父级标签上加 th:inline = “text”属性</p>
<p>在 ThymeleafController 类中添加方法</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"> <br><span class="hljs-meta">@RequestMapping(value = &quot;/inline&quot;)</span> <br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">inlineText</span><span class="hljs-params">(Model model)</span> </span>&#123; <br> <br>    User user = <span class="hljs-keyword">new</span> User(); <br>    user.setId(<span class="hljs-number">1003</span>); <br>    user.setName(<span class="hljs-string">&quot;杰克&quot;</span>); <br>    user.setPhone(<span class="hljs-string">&quot;13899990000&quot;</span>); <br>    user.setAddress(<span class="hljs-string">&quot;天津市&quot;</span>); <br>    model.addAttribute(<span class="hljs-string">&quot;user&quot;</span>,user); <br> <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;inline &quot;</span>; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>创建 inline.html 页面</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>内敛文本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>标准变量表达式(展示数据)<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br>        用户编号：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.id&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>        用户姓名：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.name&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>        用户手机号：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.phone&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>        用户地址：<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.address&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>内敛文本th:inline=&quot;text&quot;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:inline</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span> <br>            用户编号：<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>[[$&#123;user.id&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>            用户姓名：[[$&#123;user.name&#125;]]<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>            用户手机号：[[$&#123;user.phone&#125;]]<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>            用户地址：[[$&#123;user.address&#125;]]<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p>浏览器访问测试</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271825512.png" srcset="/img/loading.gif" lazyload alt="image-20211027182504438"></p>
<p><font color="red">注意：一般我们将 th:inline=”text”放到<code>&lt;body th:inline=&quot;text&quot;&gt;</code>标签中</font></p>
<p>（2）内敛脚本（th:inline=”javascript”）</p>
<p>th:inline=”javascript”在js 代码中获取后台的动态数据</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">th:inline</span>=<span class="hljs-string">&quot;javascript&quot;</span>&gt;</span><span class="javascript"> </span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showInlineJavaScript</span>(<span class="hljs-params"></span>) </span>&#123; </span><br><span class="javascript">        alert(<span class="hljs-string">&quot;欢迎 &quot;</span> + [[$&#123;user.name&#125;]] + <span class="hljs-string">&quot; 到我院指导工作！联系方式： &quot;</span> + </span><br><span class="javascript">[[$&#123;user.phone&#125;]]); </span><br><span class="javascript">    &#125; </span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">th:onclick</span>=<span class="hljs-string">&quot;showInlineJavaScript()&quot;</span>&gt;</span>展示内容<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>效果</p>
<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271826698.png" srcset="/img/loading.gif" lazyload alt="image-20211027182637598"></p>
<h3><span id="thymeleaf-字面量">Thymeleaf 字面量</span></h3><p>字面量：对应数据类型的合法取值，可以在 html 页面直接使用，不需要后台传递</p>
<p>在 ThymeleafController 类中添加方法并准备数据 </p>
<p><font color="red">不多说了，就是常量。</font></p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;&#x27;/user/info?id=&#x27; + $&#123;user.id&#125;&#125;&quot;</span>&gt;</span>查看用户：文本字面的路径使用<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br><br>今年是<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;2019&quot;</span>&gt;</span>1949<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>年<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;success&#125;&quot;</span>&gt;</span>执行成功<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;user ne null&#125;&quot;</span>&gt;</span>用户不为空<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;&#x27;共&#x27;+$&#123;totalRows&#125;+&#x27;条&#x27;+$&#123;totalPage&#125;+&#x27;页，当前第&#x27;+$&#123;currentPage&#125;+&#x27;</span></span><br><span class="hljs-string"><span class="hljs-tag">页&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h3><span id="thymeleaf-运算符">Thymeleaf 运算符</span></h3><p>三元运算：表达式?”正确结果”:”错误结果” </p>
<p>算术运算：+ , - , * , / , % </p>
<p>关系比较:：&gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le ) </p>
<p>相等判断：== , != ( eq , ne ) </p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/operator&quot;)</span> <br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">operator</span><span class="hljs-params">(Model model)</span> </span>&#123; <br> <br>    model.addAttribute(<span class="hljs-string">&quot;sex&quot;</span>,<span class="hljs-number">1</span>); <br> <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;operator&quot;</span>; <br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>页面</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>运算符<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>三元运算符<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;sex eq 1 ? &#x27;男&#x27;:&#x27;女&#x27;&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;sex == 1 ? &#x27;男&#x27;:&#x27;女&#x27;&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br> <br>20*8=<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;20 * 8&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>20/8=<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;20 / 8&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>20+8=<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;20 + 8&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br>20-8=<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;20 - 8&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br> <br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;5 &gt; 2&quot;</span>&gt;</span>5&gt;2是真的<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;5 gt 2&quot;</span>&gt;</span>5 gt 2是真的<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<p><img src="http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202110271851037.png" srcset="/img/loading.gif" lazyload alt="image-20211027185102965"></p>
<h3><span id="thymaleaf-表达式基本对象">Thymaleaf 表达式基本对象</span></h3><p>模板引擎提供了一组内置的对象，这些内置的对象可以直接在模板中使用，这些对象由#号开始引用，我们比较常用的内置对象</p>
<h4><span id="request">#request</span></h4><p>#request相当 于httpServletRequest 对 象，这是3.x版 本， 若 是2.x版本使用#httpServletRequest，在页面获取应用的上下文根，一般在 js 中请求路径中加上可以避免 404 </p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Thymeleaf表达式基本对象<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span> <br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">th:inline</span>=<span class="hljs-string">&quot;javascript&quot;</span>&gt;</span><span class="javascript"> </span><br><span class="javascript">            <span class="hljs-keyword">var</span> basePath = [[$&#123;#httpServletRequest.getScheme() + <span class="hljs-string">&quot;://&quot;</span> + </span><br><span class="javascript">                             #httpServletRequest.getServerName() + <span class="hljs-string">&quot;:&quot;</span> + </span><br><span class="javascript">                             #httpServletRequest.getServerPort() + </span><br><span class="javascript">                             #httpServletRequest.getContextPath()&#125;]]; </span><br><span class="javascript"></span><br><span class="javascript">                             <span class="hljs-comment">//http://localhost:8080/springboot/user/login</span></span><br><span class="javascript">                             <span class="hljs-comment">//获取协议名称 </span></span><br><span class="javascript">                             <span class="hljs-keyword">var</span> scheme = [[$&#123;#request.getScheme()&#125;]]; </span><br><span class="javascript">                             <span class="hljs-comment">//获取服务IP地址 </span></span><br><span class="javascript">                             <span class="hljs-keyword">var</span> serverName = [[$&#123;#request.getServerName()&#125;]]; </span><br><span class="javascript">                             <span class="hljs-comment">//获取服务端口号 </span></span><br><span class="javascript">                             <span class="hljs-keyword">var</span> serverPort = [[$&#123;#request.getServerPort()&#125;]]; </span><br><span class="javascript">                             <span class="hljs-comment">//获取上下文根 </span></span><br><span class="javascript">                             <span class="hljs-keyword">var</span> contextPath = [[$&#123;#request.getContextPath()&#125;]]; </span><br><span class="javascript"></span><br><span class="javascript">                             <span class="hljs-keyword">var</span> allPath = scheme+<span class="hljs-string">&quot;://&quot;</span>+serverName+<span class="hljs-string">&quot;:&quot;</span>+serverPort+contextPath; </span><br><span class="javascript"></span><br><span class="javascript">                             alert(allPath); </span><br><span class="javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>



<h4><span id="session">#session</span></h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = &quot;/index&quot;)</span> <br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">index</span><span class="hljs-params">(HttpServletRequest request)</span> </span>&#123; <br> <br>    request.getSession().setAttribute(<span class="hljs-string">&quot;username&quot;</span>,<span class="hljs-string">&quot;zhangsan&quot;</span>); <br> <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;index&quot;</span>; <br>&#125; <br></code></pre></div></td></tr></table></figure>

<p>页面</p>
<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>从SESSION中获取用户名称<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;#session.getAttribute(&#x27;username&#x27;)&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;#httpSession.getAttribute(&#x27;username&#x27;)&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <br></code></pre></div></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html">$&#123;session.user.username&#125;<br></code></pre></div></td></tr></table></figure>



<h3><span id="thymeleaf-表达式功能对象了解">Thymeleaf 表达式功能对象（了解）</span></h3><p>模板引擎提供的一组功能性内置对象，可以在模板中直接使用这些对象提供的功能方法<br>工作中常使用的数据类型，如集合，时间，数值，可以使用 Thymeleaf 的提供的功能性对象来处理它们</p>
<p>内置功能对象前都需要加#号，内置对象一般都以 s 结尾<br>官方手册：<a target="_blank" rel="noopener" href="http://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">http://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html</a></p>
<figure class="highlight vala"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs vala"><span class="hljs-meta">#dates: java.util.Date 对象的实用方法： </span><br><br>&lt;span th:text=<span class="hljs-string">&quot;$&#123;#dates.format(curDate, &#x27;yyyy-MM-dd HH:mm:ss&#x27;)&#125;&quot;</span>&gt;&lt;/span&gt; <br><br><span class="hljs-meta">#calendars: 和dates 类似, 但是 java.util.Calendar 对象； </span><br><br><span class="hljs-meta">#numbers: 格式化数字对象的实用方法； </span><br><br><span class="hljs-meta">#strings: 字符串对象的实用方法： contains, startsWith,prepending/appending 等； </span><br><br><span class="hljs-meta">#objects: 对 objects 操作的实用方法； </span><br><br><span class="hljs-meta">#bools: 对布尔值求值的实用方法； </span><br><br><span class="hljs-meta">#arrays: 数组的实用方法； </span><br><br><span class="hljs-meta">#lists: list 的实用方法，比如&lt;span th:text=&quot;$&#123;#lists.size(datas)&#125;&quot;&gt;&lt;/span&gt; </span><br><br><span class="hljs-meta">#sets: set 的实用方法； </span><br><br><span class="hljs-meta">#maps: map 的实用方法； </span><br><br><span class="hljs-meta">#aggregates: 对数组或集合创建聚合的实用方法； </span><br></code></pre></div></td></tr></table></figure>



<h2><span id="第12章-总结及综合案例">第12章 总结及综合案例</span></h2><h3><span id="总结">总结</span></h3><p>采用 Spring Boot 开发实质上也是一个常规的 Spring 项目开发，只是利用了 SpringBoot启动程序和自动配置简化开发过程，提高开发效率。 </p>
<p>SpringBoot 项目开发代码的实现依然是使用 SpringMVC+ Spring + MyBatis 等，当然能集成几乎所有的开源项目， SpringBoot 是极速web 开发框架。 </p>
<p>采用SpringBoot 开发，需要掌握大量的注解，所以日常开发中注意对注解的积累。 </p>
<h3><span id="综合案例">综合案例</span></h3><p>通过上面内容的学习，我们完成一个综合案例：<br>采用 SpringBoot + Dubbo + MyBatis + Redis + Thymeleaf 实现对数据库的增删改查、缓存操作。<br>主要目的是练习 Springboot 如何集成各类技术进行项目开发</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a>
                    
                      <a class="hover-with-bg" href="/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot%E6%A1%86%E6%9E%B6/">SpringBoot框架</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Java/">Java</a>
                    
                      <a class="hover-with-bg" href="/tags/SpringBoot/">SpringBoot</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/11/01/Nginx/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Nginx</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/10/23/dubbo/">
                        <span class="hidden-mobile">远程服务Dubbo与Zookeeper</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"kKHw5YzfOlny9jMQJEjDkSBi-9Nh9j0Va","appKey":"3N5RE5Sl5hj96cTuho5YEMnY","path":"window.location.pathname","placeholder":"小伙伴们快来评论！","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"https://kkhw5yzf.lc-cn-e1-shared.com","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          Fluid.plugins.initFancyBox('#valine .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
    <span>Copyright© 2021 huanfenz</span>
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        loader: {
          load: ['ui/lazy']
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
